/*lentainform.comV3*/if(!this.LentaInformJSON){ LentaInformJSON=function(){function f(n){return n<10?'0'+n:n;}Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case'string':return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c;}c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"':'"'+value+'"';case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}if(typeof value.toJSON==='function'){return stringify(value.toJSON());}a=[];if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||'null');}return'['+a.join(',')+']';}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}else{for(k in value){if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}return'{'+a.join(',')+'}';}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object'){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n;}}}}return filter(k,v);}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;}throw new SyntaxError('parseJSON');}};}();}LentaInformBaseBlockC662399 = function(root_id, VZ, fallback, containerId, uniqId) { var self = this; this.VZ = VZ; this.root = this.VZ.document.getElementById(root_id); this.containerId = containerId; this.uniqId = uniqId; this.DP = fallback; this.page = 1; this.iteration = 1; this.adlink = ''; this.template = ''; this.id = 662399; this.tickerShow = 0; this.pvid = 0; this.TM = []; this.NP = {}; this.XT = {}; this.KM = []; this.CQ = []; this.UE = []; this.MC = ""; this.BI = ""; this.ZZ = 0; this.WN = {}; this.BD = ""; this.VQ = ""; this.crashStep = 0; this.loadedDefault = false; this.teaserHashes = {}; this.ZS = {}; this.json = []; this.servicerData = {}; this.childWidgetsData = []; this.fakeMode = 0; this.requestParams = {}; self.webProtocol = 'https:'; this.FG = "lentainform.com"; self.templateText = '<div class="mgbox"><!--advertPrefix-->{foreach} {if this.iteration != 1}</div>{/if}<div class="mgline"> <div class="image-with-text"> <div class="mcimg"> <a {$target} {$href} > <div class="image-container"> <img class="mcimg" {$src} /> <!--intExchangeWagesImagePlace--> </div> </a> </div> <div class="text-elements"> <div class="text_on_hover"> <div class="mctitle"><a {$target} {$href}>{$title}</a></div> <div class="mgtobottom"> </div> </div></div> </div> {/foreach} </div></div>'; self.styles = '@font-face { font-family: \'Roboto\'; font-style: normal; font-weight: 400; src: local(\'Roboto\'), local(\'Roboto-Regular\'), url(https://fonts.gstatic.com/s/roboto/v15/mUdRVCMHGKUBOACHGTH1g-vvDin1pK8aKteLpeZ5c0A.woff) format(\'woff\'); } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 400; src: local(\'Open Sans\'), local(\'OpenSans\'), url(https://fonts.gstatic.com/s/opensans/v10/K88pR3goAWT7BTt32Z01m1tXRa8TVwTICgirnJhmVJw.woff2) format(\'woff2\'); unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 400; src: local(\'Open Sans\'), local(\'OpenSans\'), url(https://fonts.gstatic.com/s/opensans/v10/RjgO7rYTmqiVp7vzi-Q5UVtXRa8TVwTICgirnJhmVJw.woff2) format(\'woff2\'); unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 400; src: local(\'Open Sans\'), local(\'OpenSans\'), url(https://fonts.gstatic.com/s/opensans/v10/u-WUoqrET9fUeobQW7jkRVtXRa8TVwTICgirnJhmVJw.woff2) format(\'woff2\'); unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 400; src: local(\'Open Sans\'), local(\'OpenSans\'), url(https://fonts.gstatic.com/s/opensans/v10/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2) format(\'woff2\'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 700; src: local(\'Open Sans Bold\'), local(\'OpenSans-Bold\'), url(https://fonts.gstatic.com/s/opensans/v10/k3k702ZOKiLJc3WVjuplzCUUniRZcd_wq8DYmIfsw2A.woff2) format(\'woff2\'); unicode-range: U+0460-052F, U+20B4, U+2DE0-2DFF, U+A640-A69F; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 700; src: local(\'Open Sans Bold\'), local(\'OpenSans-Bold\'), url(https://fonts.gstatic.com/s/opensans/v10/k3k702ZOKiLJc3WVjuplzOXREeHhJi4GEUJI9ob_ak4.woff2) format(\'woff2\'); unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 700; src: local(\'Open Sans Bold\'), local(\'OpenSans-Bold\'), url(https://fonts.gstatic.com/s/opensans/v10/k3k702ZOKiLJc3WVjuplzBUOjZSKWg4xBWp_C_qQx0o.woff2) format(\'woff2\'); unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF; } @font-face { font-family: \'Open Sans\'; font-style: normal; font-weight: 700; src: local(\'Open Sans Bold\'), local(\'OpenSans-Bold\'), url(https://fonts.gstatic.com/s/opensans/v10/k3k702ZOKiLJc3WVjuplzOgdm0LZdjqr5-oayXSOefg.woff2) format(\'woff2\'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000; } .mgresponsive { display: inherit; } .mgbox { padding: 0 !important; position: relative !important; text-align: center; vertical-align: top !important; margin: 0 auto; border-style: solid; border-width: 0px; border-color: ; background-color: ; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: row; -ms-flex-direction: row; flex-direction: row; -webkit-flex-wrap: wrap; -ms-flex-wrap: wrap; flex-wrap: wrap; line-height: 100% !important; transition: none !important; box-sizing: border-box; } .mgbox { width: 100%; max-width: 100%; } div.mcimg { padding: 0px; text-align: center; } div.mcimg { float: left; } img.mcimg { border-style: solid; border-color: #ffffff; border-width: 0px; width: 100% !important; height: auto !important; max-width: 60px; max-height: 60px; box-sizing: border-box; display: block; } img.mcimg { min-width: 60px; } .mctitle { margin-top: 10px; text-align: left; padding-top: 10px; } .mctitle a { font-weight: normal; font-size: 14px; line-height: 14px; font-style: normal; text-decoration: none; color: #000000; font-family: \'Open Sans\', sans-serif; } .mcdesc { display: none; text-align: left; } .mcdesc a { font-weight: normal; font-size: 11px; line-height: 11px; font-style: normal; text-decoration: none; color: #444444; font-family: Roboto; } .mcdomain { display: none; text-align: left; } .mcdomain a { font-weight: normal; font-size: 13px; line-height: 13px; font-style: italic; text-decoration: none; color: #7f7f7f; font-family: Roboto; padding: 4px; display: block; overflow: hidden; } .mcdomain a img.mcimgsrc { vertical-align: bottom; margin-bottom: -3px; height: 20px; width: 20px; display: inline-block; } .mgline { background: none repeat scroll 0 0; background-color: ; cursor: pointer; display: inline-block; _overflow: hidden; *zoom: 1; *display: inline; padding: 0 !important; border-style: solid; border-color: #e9e9e9; border-width: 1px; width: 49%; max-width: 49%; box-sizing: border-box; margin: 10px 0.5%; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: column; -ms-flex-direction: column; flex-direction: column; word-wrap: break-word; } .mgline .image-container { position: relative; } .mgline .image-container .mcimgad { position: absolute; right: 0; bottom: 0; width: 20px; height: 20px; } .mgline { vertical-align: top; } .mgline, .mgbox { min-width: 200px; } img.mcimg { display: block; } .mgline[max-width~="120px"] .mcdesc { display: none !important; } @supports not (flex-wrap: wrap) { .mgbox { display: block !important; } .mgline { display: inline-block !important; } } .text-elements a { text-decoration: none; } div.mcprice { text-align: center; } div.mcprice span { font-weight: bold; font-size: 12px; line-height: 12px; font-style: normal; text-decoration: none; color: #ff0000; font-family: Roboto; } div.mgbuybox, div.mgarrowbox { display: false; } div.mgbuybox, div.mgarrowbox, div.mcprice { display: none; } span.mcpriceold { text-decoration: line-through !important; } @media (max-width: 480px) { .mgline { width: 48% !important; margin: 1% !important; max-width: 48% !important; } } @media (max-width: 480px) { .mgline { width: 98% !important; margin: 1% !important; max-width: 98% !important; } } .mgpopular { background-color: rgba(255, 0, 0, 0.2) !important; border-color: rgba(255, 90, 0, 0.3) !important; } .mgline .image-container .mcimgad { width: 70px; } .mctitle a:hover { color: #7f7f7f; } span.mghead { float: left; font-weight: bold; margin-left: 7px; min-height: 15px; } .mghead { font-family: \'Open Sans\', sans-serif !important; color: #000000 !important; font-size: 14px !important; text-transform: capitalize !important; } .mcdomain a { color: #7f7f7f; } .mgheader { width: 100% !important; } .mgheader a { top: 25px !important; } .widgets_logo { position: static !important; } .mgbox { padding-top: 25px !important; } .mgline { position: relative; } .mgline .fake { visibility: hidden; position: relative; padding-top: 4px; } .mgline div.mcprice { background-color: #7f7f7f; padding: 3px 0; } .mgline .mctitle { margin-top: 2px; line-height: 1 !important; } .mgline .mcdesc { padding-top: 7px; } .mgline .mcdomain { padding-top: 3px; } .mgline .mcdiscount { display: none; } .mgline .mcprice .mcpriceold { font-size: 10px; color: #bbbbbb; } .mgline:hover .mctitle a { color: #7f7f7f; } div[class*=mg_addad] { margin-top: -4px; margin-bottom: 2px; } img.mcimg { margin: 0; opacity: 1 !important; } .mgline { position: relative; } .mgline .fake { visibility: hidden; position: relative; padding-top: 4px; } .mgline:hover .mcpriceold + .mcprice, .mgline:hover .mcpriceold { visibility: hidden; } .mgline:hover .mcdiscount { display: block; position: absolute; left: 0px; right: 0px; top: 5px; } .mgarrowbox { position: relative; background: #7f7f7f; width: 55%; height: 22px; margin: 0px; border-color: transparent; border-left-color: #7f7f7f; display: inline-block; font-family: \'Open Sans\', sans-serif; } .mgarrowbox:after { left: 100%; top: 50%; content: " "; height: 0px; width: 0px; position: absolute; pointer-events: none; margin-top: -11px; border: solid 11px; border-color: inherit; } .mgbuybox { width: 40%; display: inline-block; text-align: right; font-weight: bold; font-family: \'Open Sans\', sans-serif; font-size: 12px; color: #444444; text-decoration: underline; } .mctitle { margin-top: 2px; line-height: 1 !important; } .mcdesc { margin-top: 0; margin-bottom: 2px; } .mcdesc a { line-height: 1.5 !important; } div.mcprice { margin-top: 5px; line-height: 12 px !important; } div.mgbuybox, div.mgarrowbox { display: none; } .mgtobottom { position: absolute; bottom: 0; width: 100%; text-align: left; } .mgline .mgtobottom, .mgline .fake { display: none; } .mcpriceold { float: left; padding-left: 5px; } .mcdiscount { display: none; } .mcdomain { display: none; overflow: hidden; padding: 4px; } .mcdomain a { padding: 0px; display: block; padding-top: 3.5px; padding-bottom: 2px; overflow: hidden; } div.mcprice, div.mcriceold { font-weight: bold; font-size: 12px; line-height: 12px; font-style: normal; text-decoration: none; color: #ff0000; font-family: Roboto; } div.mcpriceold { text-decoration: line-through !important; } .mgline[max-width~="120px"] .mgarrowbox, .mgline[max-width~="120px"] .mgbuybox { display: none !important; } .mgline .image-with-text { min-height: 1px; display: flex; } @media (max-width: 480px) { .mgline { width: 98% !important; margin: 1% !important; max-width: 98% !important; } } .mgline, .mgbox { min-width: 49%; } .mgline { margin: 0 0.5%; padding: 10px 0!important; border-style: solid none none; } .mgline .text-elements { width: 60%; float: left; flex-grow: 1; } .mgline .image-container { overflow: hidden; } div.mcimg { max-width: 37%; margin-right: 10px; } .mctitle { padding-top: 0; margin-top: 0; } .mgline .mctitle a { display: inline-block; line-height: 18px; } .mgtobottom { position: relative; } .mgline .mgtobottom, .mgline .fake { display: block; } .mcdomain { padding: 0; margin-top: 3px; } .mcdomain a { padding: 0; padding-bottom: 3px; } .mgline:nth-child(5), .mgline:nth-child(6) { border-style: solid none; } @media screen and (max-width: 480px) { .mgbox, .mgline { min-width: inherit !important; } .mgline { width: 98% !important; margin: 0 !important; } .mgline:nth-child(6) { display: none; } .mgline .mctitle a { font-size: 20px; line-height: 20px; } .mgline .mgtobottom .mcdomain a { font-size: 13px; line-height: 13px; } } '; self.templateText = self.templateText.replace(/\((\'|\")?\/\//g, '($1' + self.webProtocol + '//'); self.templateText = self.templateText.replace('src="//', 'src="' + self.webProtocol + '//'); self.templateText = self.templateText.replace('href="//', 'href="' + self.webProtocol + '//'); self.styles = self.styles.replace(/\((\'|\")?\/\//g, '($1' + self.webProtocol + '//'); self.clickTracking = ""; self.DH = ''; self.funcBlocks = {}; self.ZS = {}; self.loadedPopularTeaser = false; self.deviceType = "desktop"; self.hrefAttr = "href"; self.IB = ["exchange"]; this.MP = function(str,limit,dots) { if (str.length<=limit) return str; var word=new Array(); word=str.split(" "); var ret=word[0] + ' '; var test; for (i=1;i<word.length;i++){ test=ret+word[i]; if (test.length>limit) return ret + (typeof(dots) == 'undefined' || dots ? '...' : ''); else ret+=word[i] + ' '; } return str; }; this.XE = function(str,limit){ var word=new Array(); var i; var ret=''; word=str.split(" "); for (i=0;i<word.length;i++){ if (word[i].length>limit && word[i].search(/&\w+;/)<0) ret+=word[i].substr(0,limit) + ' ' + word[i].substr(limit) + ' '; else ret+=word[i] + ' '; } return ret; }; this.CI = function(title) { title=this.MP(title,65,1); return title; }; this.LV = function(desc) { desc=this.MP(desc,65); return desc; }; this.isArray = function(o) { return Object.prototype.toString.call(o) === '[object Array]'; }; self.fixGetElementsByClassNameHandler = function(el) { if (el.getElementsByClassName == undefined) { el.getElementsByClassName = function(cl) { var retnode = []; var myclass = new RegExp('\\b'+cl+'\\b'); var elem = this.getElementsByTagName('*'); for (var i = 0; i < elem.length; i++) { var classes = elem[i].className; if (myclass.test(classes)) retnode.push(elem[i]); } return retnode; }; } }; this.XW = function() { if (!self.DP) { if (self.VZ.document.getElementById("LentaInformPreloadC" + this.containerId)) { self.VZ.document.getElementById("LentaInformPreloadC" + this.containerId).style.display = 'none'; } else if (self.VZ.document.getElementById("M399009PreloadC" + this.containerId)) { self.VZ.document.getElementById("M399009PreloadC" + this.containerId).style.display = 'none'; } } else if (self.DP && this.ZZ == 0) { self.root.innerHTML = ""; } }; this.LentaInformLoadNews = function(json, servicerData) { this.XW(); if (typeof servicerData != 'undefined') { self.servicerData = servicerData; if (typeof servicerData.dt != 'undefined') { self.deviceType = servicerData.dt; } } if (self.fakeMode == 0) { for (var i = 0; i < self.KM.length; i++) { self[self.KM[i]](); } } if (this.isArray(json)){ if (json.length==0) { return; } var template = self["templateFunc"](self, json); self.json = json; if (this.root && template) { if (typeof self.parseAdvertLink == 'function') { template = self.parseAdvertLink(template); } if (this.DP && this.ZZ == 0) { this.root.innerHTML = "" } this.root.innerHTML += this.BD + template + this.VQ; } } else { if (this.root && this.ZZ==0) { this.root.innerHTML=''; return; } } if (self.servicerData && self.servicerData.muidn && self.servicerData.pvid && self.pvid != 0 && self.servicerData.pvid == self.pvid) { try { if (self.VZ.localStorage) { self.VZ.localStorage.setItem('mgMuidn', self.servicerData.muidn); } } catch (ex) {} } this.NP["page"] = this.page; this.NP['time'] = (new Date()).getTime(); this.setCookie(); var hrefs = this.root.getElementsByTagName("a"); for (var i = 0; i < hrefs.length; i++) { hrefs[i].rel = "nofollow"; } this.AU(self.styles); this.ZZ++; if (self.fakeMode == 0) { for (var i = 0; i < self.CQ.length; i++) { self[self.CQ[i]](); } } else { if (typeof(self.responsiveInit) == "function") { self.responsiveInit(); } } }; this.VX = function() { var d = this.VZ.document, w = this.VZ, dE = 'documentElement', cH = 'clientHeight', cW = 'clientWidth', iH = 'innerHeight', iW = 'innerWidth', sH = 'scrollHeight', sW = 'scrollWidth', oH = 'offsetHeight', oW = 'offsetWidth', oL = 'offsetLeft', oT = 'offsetTop', sT = 'scrollTop', sL = 'scrollLeft'; if (w[iW]) { return {"c": w[iH], "s": w.pageYOffset}; } else if (d[dE] && d[dE][cW]) { return {"c": d[dE][cH], "s": d[dE][sT]}; } else if (d.body[cW]) { return {"c": d.body[cH], "s": d.body[sT]}; } return 0; }; this.crashWorker = function() { if (LentaInformInfC662399.template == '' && !LentaInformInfC662399.loadedDefault) { LentaInformInfC662399.crashStep = 1; LentaInformInfC662399.LentaInformRedirectComposite([]); } }; this.renderItem = function(n, callbackText, type) { if (self.isArray(n)) { var p = self.GI(n, type); if (p.id && !(p.id in self.WN)) { if (typeof p.hash !== 'undefined' && typeof p.id !== 'undefined') { self.teaserHashes[p.id] = p.hash; } self.WN[p.id] = 1; var addClasses = []; if (!self.loadedPopularTeaser && typeof(p.other.adc) != 'undefined' && ( p.other.adc.toString().indexOf('mrsadca') >= 0 || p.other.adc.toString().indexOf('mrsadcp') >= 0 )) { addClasses.push('mgpopular'); self.loadedPopularTeaser = true; } addClasses.push('teaser-' + p.id); if ('l' in p.other && null != p.other.l.match(/[\?|&]u=/)) { addClasses.push('dsp'); } if ('type' in p.other) { addClasses.push('type-' + p.other.type); } var createWebLink = function(url) { return url.indexOf('//') === 0 ? self.webProtocol + url : url; }; var vars = [ [/\{\*.*?\*\}/, ''], [/\{\$href\}/g, self.hrefAttr + '="' + self.VG(p.hash) + '" data-hash="' + p.hash + '"'], [/\{\$pmc_item\}/, self.id], [/\{\$hash\}/g, p.hash], [/\{\$target\}/g, (typeof p.other.type !== 'undefined' && p.other.type == 'i') ? 'target="_self"' : 'target="_blank"'], [/(class\=\"[^+]?)(mgline)([^+]?\")/, '$1$2 ' + addClasses.join(' ') + '$3'], [/\{\$source\}/g, p.source], [/\{\$src\}/g, 'width="60" height="60"' + ' data-i="'+p.id+'" src="'+ createWebLink(p.other["i"]) + '"'], [/\{\$title\}/g, self.CI(p.title)], [/\{\$desc\}/g, self.LV(p.desc)], [/\{\$iteration\}/g, self.iteration], [/\$iteration/g, self.iteration], [/this\.iteration/g, self.iteration], [/\{\$price\}/g, p.price], [/\{\$priceold\}/g, p.priceold], [/\{\$discount\}/g, p.discount], [/\{if \$price\}/g, "{if '' != p.price.replace(new RegExp('[^0-9.]'), '')}"], [/\{if !\$price\}/g, "{if '' == p.price.replace(new RegExp('[^0-9.]'), '')}"], [/\{if \$priceold\}/g, "{if '' != p.priceold.replace(new RegExp('[^0-9.]'), '')}"], [/\{if \$price != " "\}/g, "{if p.price != ' '}"], [/\{if \$price == " "\}/g, "{if p.price == ' '}"], [/\$priceold/g, p.priceold], [/\$price/g, p.price], [/\{if \$rep\}/g, "{if p.isReplic}"] ]; for (var i = 0 ; i < vars.length; i++) { callbackText = callbackText.replace(vars[i][0], vars[i][1]); } while (true) { var x = callbackText; var r = /\{if ([^\}]*?)\}(((?!\{(?:\/)?if).)*)\{\/if\}/g; callbackText = callbackText.replace(r, function(str, p1, p2) { if (eval(p1)) { return p2; } else { return ""; } }); if (x == callbackText) break; } this.iteration++; return callbackText; } else { self.WN[p.id]++; return ""; } } }; this.generateTemplate = function(templateText) { self["templateText"] = templateText; self["templateFunc"] = function(inf, json) { var parts = /(.*)?\{foreach\}(.*)?\{\/foreach\}(.*)?/.exec(self["templateText"]); if (!parts) { return; } var template = typeof(parts[1]) != 'undefined' ? parts[1] : ''; for (var i = 0; i < json.length; i++) { template += inf.renderItem(json[i], parts[2], 'goods'); } template += typeof(parts[3]) != 'undefined' ? parts[3] : ''; return template; }; return true; }; this.init = function() { if (this.root) { this.getCookie(); var cookiePage = parseInt(this.NP["page"]); this.TM = this.root.getElementsByTagName('a'); var pageOffset = (this.VZ['LentaInformPageOffset'] ? parseInt(this.VZ['LentaInformPageOffset']) : 0); self.addEvent(self.root, 'click', self.hangNiceLinkListener); self.addEvent(self.root, "\x63\x6f\x6e\x74\x65\x78\x74menu", self.hangNiceLinkListener); self.addEvent(self.root, 'mouseup', self.hangNiceLinkListener); self.addEvent(self.root, 'touchstart', self.hangNiceLinkListener); var pagesCountNews = parseInt('20'); var pagesCountGoods = parseInt(''); var pagesCount = pagesCountNews && pagesCountGoods ? Math.min(pagesCountNews, pagesCountGoods) : (pagesCountNews ? pagesCountNews : pagesCountGoods); if (cookiePage != null && cookiePage < pagesCount && cookiePage > 0 ) { this.page = cookiePage + 1; } else if (cookiePage > (pagesCount - 1) || cookiePage < 1 ) { this.page = 1 + pageOffset; } if ((new Date()).getTime() - (this.NP['time']!=undefined ? this.NP['time'] : 0) >= 6e5) { this.page = 1+pageOffset; } if (!this.page) this.page=1; this.pageUnlim = this.page - 1; this.NP["page"] = this.page; this.setCookie(); if (!this.VZ.document.cookie) { var dt = new Date(); this.page = dt.getSeconds()%pagesCount+1; } this.MC = self.webProtocol + '//servicer.'+this.FG+'/'; self.clickTracking = typeof(self.VZ.MGClickTracking) != 'undefined' ? self.VZ.MGClickTracking : ""; if (!self.generateTemplate(self.templateText)) { return; } self.VZ.onClickExcludes = self.VZ.onClickExcludes || []; self.VZ.onClickExcludes.push(self.root); for (var i=0; i<this.UE.length; i++) { this[this.UE[i]](); } } }; this.getMostTopWindow = function() { var w = self.VZ; while (w != w.parent) { try { var test = w.parent.document.body; w = w.parent; } catch (e) { break; } } return w; }; this.DT = function(forceShow, refresh) { var script = this.VZ.document.createElement('script'); script.type = 'text/javascript'; script.charset = 'utf-8'; var scriptSrc = ""; var fs = forceShow ? 'fs/' : ''; scriptSrc += self.MC + fs + '662399/' + this.page; if (refresh) { self.requestParams.rsh = "rsh=1"; } if (this.VZ.MGi != undefined) { self.requestParams.geo = "geo_zone=" + this.VZ.MGi; } self.requestParams.pv = "pv=5"; self.requestParams.cbuster = "cbuster=" + (this.VZ.MG_CacheBuster ? this.VZ.MG_CacheBuster : ((new Date().getTime()) + '' + Math.floor((Math.random() * 1000000000) + 1))); if (JSON.parse('["exchange"]').indexOf('int_exchange') >= 0) { var ogUrlEl = self.VZ.document.querySelector('meta[property="og:url"]'); if (ogUrlEl) { self.requestParams.ogurl = 'ogurl=' + ogUrlEl.getAttribute('content'); } var ogTitleEl = self.VZ.document.querySelector('meta[property="og:title"]'); if (ogTitleEl) { self.requestParams.ogtitle = 'ogtitle=' + ogTitleEl.getAttribute('content'); } } if (self.uniqId != '') { self.requestParams.uniqId = "uniqId=" + self.uniqId; } if (typeof self.VZ.MG_setRequestNonPersonalizedAds != 'undefined' && self.VZ.MG_setRequestNonPersonalizedAds == 1) { self.requestParams.npa = "npa=1"; } if (scriptSrc.indexOf('?') == -1) { scriptSrc += '?'; } else { scriptSrc += '&'; } var params = []; for (var key in self.requestParams) { params.push(self.requestParams[key]); } params.push('ref=' + encodeURIComponent(this.VZ.document.referrer)); var isIframe = self.VZ.self !== self.VZ.top; if (isIframe) { params.push('iframe=1'); } try { if (!sessionStorage.MG_Session_lastUpdate || Number(sessionStorage.MG_Session_lastUpdate) + 30 * 60 * 1000 < Date.now()) { var refererUrl = isIframe ? this.VZ.parent.document.referrer : this.VZ.document.referrer; var matchDomain = refererUrl.match(/:\/\/([^\/:]+)/i); sessionStorage.MG_Session_pr = matchDomain && matchDomain[1] ? matchDomain[1] : ''; sessionStorage.MG_Session_lu = isIframe ? this.VZ.parent.location.href : this.VZ.location.href; } sessionStorage.MG_Session_lastUpdate = Date.now(); if (sessionStorage && sessionStorage.MG_Session_pr) { params.push('pr=' + encodeURIComponent(sessionStorage.MG_Session_pr)) } if (sessionStorage && sessionStorage.MG_Session_lu) { params.push('lu=' + encodeURIComponent(sessionStorage.MG_Session_lu)) } } catch(err) { } var w = self.getMostTopWindow(); if (typeof w._mgPageView399009 == 'undefined') { w._mgPageView399009 = true; params.push('pageView=1'); } else { params.push('pageView=0'); } self.pvid = (new Date()).getTime().toString(16) + (Math.round(Math.random() * 1000000000)+2147483648).toString(16); params.push('pvid=' + self.pvid); try { if (self.VZ.localStorage) { var mgMuidn = self.VZ.localStorage.getItem('mgMuidn'); if (mgMuidn) { params.push('muid=' + mgMuidn); } } } catch (ex) {} scriptSrc += params.join("&"); script.src = scriptSrc; (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(script); script.onerror = function () { self.mg_ws.onmessage = self.mg_ws_messageHandler; self.sendMessage('gb|'+script.src); self.isAdblock = true; }; }; this.start = function() { if (self.root && self.ZZ == 0) { self.DT(); } }; this.addEvent = function(elem, type, handler) { if (elem.addEventListener) { elem.addEventListener(type, handler, false) } else { elem.attachEvent('on' + type, handler) } }; this.removeEvent = function(elem, type, handler) { if (elem.removeEventListener) { elem.removeEventListener(type, handler, false) } else { elem.detachEvent('on' + type, handler) } }; this.getMainCssSelector = function() { return "#" + (this.realRoot ? this.realRoot.id : this.root.id); }; this.doubleClickHandler = function(parameters) { var i, query = [], image = new Image(0, 0); if (parameters.url.tagName != 'A') { parameters.url = self.ZL(parameters.url); if (null == parameters.url) { return; } } for (i in parameters) { query.push(encodeURIComponent(i) + '=' + encodeURIComponent(parameters[i])); } image.src = self.webProtocol + '//c.lentainform.com/doubleclick?' + query.join('&'); };};var mgCanLoad662399 = false;var mgFallback662399 = false;if (document.getElementById("MG_ID")) mgCanLoad662399 = true; if (document.getElementById("LentaInformComposite662399") || document.getElementById("M399009Composite662399")) { mgCanLoad662399 = true; mgFallback662399 = true; }if (this['mgCanLoad662399']) { if (!mgFallback662399) { var uniqId = ""; if ('0' == '1') { uniqId = ("00000" + Math.round(Math.random()*100000).toString(16)).slice(-5); } var uniqStr = uniqId != "" ? ("_" + uniqId) : ""; var rootId662399 = document.getElementById("MG_ID").innerHTML; var div662399 = parent.window.document.createElement('div'); div662399.id = "LentaInformComposite662399" + uniqStr; var mgRootId662399 = parent.window.document.getElementById("LentaInformScriptRootC" + rootId662399) ? ("LentaInformScriptRootC" + rootId662399) : ("M399009ScriptRootC" + rootId662399); parent.window.document.getElementById(mgRootId662399).id = mgRootId662399 + uniqStr; var mgPreloadId662399 = parent.window.document.getElementById("LentaInformPreloadC" + rootId662399) ? ("LentaInformPreloadC" + rootId662399) : ("M399009PreloadC" + rootId662399); if (parent.window.document.getElementById(mgPreloadId662399)) { parent.window.document.getElementById(mgPreloadId662399).id = mgPreloadId662399 + uniqStr; } mgRootId662399 = mgRootId662399 + uniqStr; parent.window.document.getElementById(mgRootId662399).appendChild(div662399); LentaInformInfC662399 = new LentaInformBaseBlockC662399(div662399.id, parent.window, false, rootId662399 + uniqStr, uniqId); } else { var mgRootId662399 = document.getElementById("LentaInformComposite662399") ? "LentaInformComposite662399" : "M399009Composite662399"; LentaInformInfC662399 = new LentaInformBaseBlockC662399(mgRootId662399, window, true, 0, ''); } this['LentaInformCMainBlock662399'] = function(self){ self.mg_ws = typeof(mg_ws662399)=="object" ? mg_ws662399 : {}; self.mg_ws_location = "wss://wsp.lentainform.com/ws"; self.waitForSocketConnection = function (e, t) { setTimeout(function() { return 1 === e.readyState ? void (null != t && t()) : void self.waitForSocketConnection(e, t) }, 5) }; self.CQ.push("XJ"); self.SH = function(hash, event, element) { var href = ""; var data = self.ZS[hash]; if (element && typeof self.VZ._mgExternalLinkChanger !== 'undefined' && self.VZ._mgExternalLinkChanger == 1) { href = element.protocol + "//" + element.hostname + element.pathname; var paramsStr = element.search; if (paramsStr != '') { paramsStr = paramsStr.replace("?", ""); var params = paramsStr.split("&"); for (var i = 0; i < params.length; i++) { var param = params[i].split("="); if (param[0] != 'k' && param[0] != 'dc') { href += (i == 0 ? "?" : "&") + params[i]; } } } } else { href = self.clickTracking + self.webProtocol; if (data) { if (data.link) { if (/^http[s]?:/.test(data.link)) { href = self.clickTracking + data.link; } else { href = self.clickTracking + self.webProtocol + data.link; } } } else { href = "#"; } } if (typeof self.BM !== 'undefined' && self.BM) { if (typeof self.isWagesLink === 'function' && self.isWagesLink(element)) { href += ((href.indexOf('?') >= 0) ? '&' : '?') + 'dc=1'; } } if (self.getQueryParameterByName('dc') == 1) { href += ((href.indexOf('?') >= 0) ? '&' : '?') + 'dc=1'; } if (typeof self.NW == 'function' && data && data['coopType'] != 'i') { var afParams = self.NW(event, element); if (afParams) { var suffix = self.id; href += ((href.indexOf('?') >= 0) ? '&' : '?') + 'k=' + suffix + 'f' + afParams; } } if (self.clickTracking && href.indexOf(self.clickTracking) !== -1) { href = self.clickTracking + encodeURIComponent(href.replace(self.clickTracking, '')); } if (true == parseInt('0')) { var template = ''; template = template.replace(/^(\/\/)/, self.VZ.location.protocol + '$1'); template = template.replace(/(%host%)/, self.VZ.location.host); template = template.replace(/(%title%)/, self.BN(data[3])); href = template.replace(/(%rurl%)/, self.WT(href, true)); } return href; }; self.VG = function(hash, event, element) { var href; var data = self.ZS[hash]; if (data.other['sdl'] == 1 && data['coopType'] != 'i') { href = self.clickTracking; if (typeof(data.other['dl']) != 'undefined' && data.other['dl'] != '') { href += data.other['dl']; } else { var source = decodeURIComponent(data[0].replace(/[`|',:\/?;$%&\(\)^*!@\s]/g, '')).toLowerCase(); var title = decodeURIComponent(data[3].replace(/[`|',:\/?;$%&\(\)^*!@]/g, '')).replace(/\s/g, '_'); href += self.webProtocol + '//' + (source ? source + '/' : '') + title; } if (self.clickTracking && href.indexOf(self.clickTracking) !== -1) { href = self.clickTracking + encodeURIComponent(href.replace(self.clickTracking, '')); } } else { href = self.SH(hash, event, element); } return href; }; self.BN = function(str) { var a = { 'Ё':'YO','Й':'I','Ц':'TS','У':'U','К':'K','Е':'E','Н':'N','Г':'G','Ш':'SH','Щ':'SCH', 'З':'Z','Х':'H','Ъ':'','ё':'yo','й':'i','ц':'ts','у':'u','к':'k','е':'e','н':'n', 'г':'g','ш':'sh','щ':'sch','з':'z','х':'h','ъ':'\'','Ф':'F','Ы':'I','В':'V','А':'a', 'П':'P','Р':'R','О':'O','Л':'L','Д':'D','Ж':'ZH','Э':'E','ф':'f','ы':'i','в':'v','а':'a', 'п':'p','р':'r','о':'o','л':'l','д':'d','ж':'zh','э':'e','Я':'Ya','Ч':'CH','С':'S', 'М':'M','И':'I','Т':'T','Ь':'','Б':'B','Ю':'YU','я':'ya','ч':'ch','с':'s','м':'m', 'и':'i','т':'t','ь':'','б':'b','ю':'yu',' ':'_', 'і':'i', 'І':'I', 'ї':'i', 'Ї':'I' }; return str.split('').map(function (char) { if (char.match(/[a-z0-9_\-]/i)) { return char; } return a[char] || ''; }).join(''); }; self.getQueryParameterByName = function(name) { name = name.replace(/[\[\]]/g, "\\$&"); var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"); var results = regex.exec(self.VZ.location.href); if (!results) { return null; } if (!results[2]) { return ''; } return decodeURIComponent(results[2].replace(/\+/g, " ")); }; self.ZL = function(el) { while (el && el.tagName !== 'BODY') { if (el.tagName == "A") { return el; } else { el = el.parentNode; } } return null; }; self.LF = function (element, selector) { var foundElements; while (element.parentNode) { foundElements = element.parentNode.querySelectorAll(selector); for (var i = 0; i < foundElements.length; i++) { if (element.isEqualNode(foundElements[i])) { return foundElements[i]; } } element = element.parentNode; } return null; }; self.GI = function(data, type) { var t = {}; t.source = data[0]; t.id = data[1]; t.title = (typeof data[3] != 'undefined') ? data[3] : ""; t.desc = (typeof data[4] != 'undefined') ? data[4] : ""; if (type.toLowerCase() == 'news') { t.mirror = data[5] ? data[5] : self.EVs[self.ZF]; t.hash = data[6]; t.other = data[7]; t.price = " "; t.priceold = t.discount = ""; t.isReplic = false; } else { t.mirror = self.EVs[self.ZF]; t.key = data[6]; t.price = (typeof data[7] != 'undefined') ? data[7].replace(".00", "") : ""; t.priceold = (typeof data[8] != 'undefined') ? data[8].replace(".00", "") : ""; t.discount = t.priceold.replace(new RegExp('[^0-9.]'), '') == '' ? '' : Math.floor((1 * /\d+(?:\.\d+)?/.exec(t.priceold) - 1 * /\d+(?:\.\d+)?/.exec(t.price)) * 100 / (/\d+(?:\.\d+)?/).exec(t.priceold)) + '%'; t.hash = data[9]; t.other = (typeof data[10] != 'undefined') ? data[10] : {}; var titleLower = t.title.toLowerCase(); var descLower = t.desc.toLowerCase(); var replicWords = ["копия", "подделка", "реплика", "как оригинал"]; var replicInsertWords = ["Копия. ", "Реплика. "]; if (data[5] == '1') { t.isReplic = true; for (var i = 0; i < replicWords.length; i++) { if (self.CI(titleLower).indexOf(replicWords[i]) > -1 || self.LV(descLower).indexOf(replicWords[i]) > -1) { t.isReplic = false; break; } } } else { t.isReplic = false; } } if (self.deviceType != 'desktop') { t.other.sdl = 0; } data['other'] = t.other; self.ZS[t.hash] = data; self.ZS[t.hash]['id'] = t.id; self.ZS[t.hash]['img'] = typeof(t.other['i']) != 'undefined' ? t.other['i'] : null; self.ZS[t.hash]['source'] = t.source; self.ZS[t.hash]['img'] = t.other["i"]; self.ZS[t.hash]['type'] = type; self.ZS[t.hash]['link'] = typeof(t.other['l']) != 'undefined' ? t.other['l'] : null; self.ZS[t.hash]['mirror'] = t.mirror; self.ZS[t.hash]['coopType'] = typeof(t.other['type']) != 'undefined' ? t.other['type'] : null; self.ZS[t.hash]['clicktrackers'] = typeof(t.other['clicktrackers']) != 'undefined' ? t.other['clicktrackers'] : []; return t; }; self.WT = function(s, replaceChars) { replaceChars = typeof replaceChars == 'undefined' ? replaceChars : false; var b64c = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='; var b64e = ''; var c1, c2, c3, e1, e2, e3, e4; var i = 0; while (i < s.length) { c1 = s.charCodeAt(i++); c2 = s.charCodeAt(i++); c3 = s.charCodeAt(i++); e1 = c1 >> 2; e2 = ((c1&3) << 4) | (c2 >> 4); e3 = isNaN(c2) ? 64 : (((c2&15) << 2) | (c3 >> 6)); e4 = isNaN(c3) ? 64 : (c3&63); b64e += b64c.charAt(e1) + b64c.charAt(e2) + b64c.charAt(e3) + b64c.charAt(e4); } if (true == replaceChars) { b64e = b64e.replace('+', '-').replace('/', '_').replace('=', '*'); } return b64e; }; self.hangNiceLinkListener = function(event) { if (self.loadedDefault) { return; } if (!event) { var event = self.VZ.event; } if (!event.target) { event.target = event.srcElement; } var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } var hash = element['data-hash'] || element.getAttribute('data-hash'); if (hash != undefined) { if (typeof self.ZS[hash] != 'undefined' && typeof self.ZS[hash]['other'] != 'undefined' && typeof self.ZS[hash]['other']['sdl'] != 'undefined' ) { self.ZS[hash]['other']['sdl'] = 0; } element[self.hrefAttr] = self.SH(hash, event, element); } }; self.htmlToElement = function (html) { var template = document.createElement('div'); template.innerHTML = html; return template.firstChild; }; self.htmlToElements = function (html) { var template = self.VZ.document.createElement('div'); template.innerHTML = html; return Array.prototype.slice.call(template.childNodes); }; self.mg_ws_messageHandler = function(evt) { if (evt && typeof evt.data != 'undefined' && evt.data != 'ok') { self.VZ.eval(evt.data) }; }; self.sendMessage = function(msg) { if (typeof self.mg_ws == 'object' && self.mg_ws.__proto__.toString() == '[object Worker]'){ self.mg_ws.postMessage(msg); } else{ var h = self.mg_ws.onmessage; try { self.mg_ws = new Worker(URL.createObjectURL(new Blob(['eval(atob(\'ZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZSl7dmFyIGg9bWdfd3Mub25tZXNzYWdlOyBtZ193cy5yZWFkeVN0YXRlPT1tZ193cy5DTE9TRUQmJihtZ193cz1uZXcgV2ViU29ja2V0KG1nX3dzX2xvY2F0aW9uKSksbWdfd3Mub25tZXNzYWdlPWgsd2FpdEZvclNvY2tldENvbm5lY3Rpb24obWdfd3MsZnVuY3Rpb24oKXttZ193cy5zZW5kKGUpfSl9ZnVuY3Rpb24gd2FpdEZvclNvY2tldENvbm5lY3Rpb24oZSx0KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1lLnJlYWR5U3RhdGU/dm9pZChudWxsIT10JiZ0KCkpOnZvaWQgd2FpdEZvclNvY2tldENvbm5lY3Rpb24oZSx0KX0sNSl9OyB2YXIgbWdfd3NfbG9jYXRpb24gPSAid3NzOi8vd3NwLmxlbnRhaW5mb3JtLmNvbS93cyI7IG1nX3dzID0gbmV3IFdlYlNvY2tldChtZ193c19sb2NhdGlvbiksIG1nX3dzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICh0KSB7cG9zdE1lc3NhZ2UodC5kYXRhKTt9LCBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKXtzZW5kTWVzc2FnZShlLmRhdGEpfQ==\'))']), {type: "application/javascript"})); self.mg_ws.onmessage = self.mg_ws_messageHandler; } catch (err) { self.isAdblock = true; self.initServerSide(); } self.mg_ws.onmessage = h; self.mg_ws.postMessage(msg); } }; self.XJ = function() { setTimeout(function() { if (typeof self.mg_ws != "object" || !(self.mg_ws instanceof WebSocket) || !self.JN(self.root)) { return; } var dt = new Date().toISOString().slice(0, 19).replace('T', ' '); var uid = self.blockType == 'news' ? '1275638' : ''; self.sendMessage('a| ' + dt + ': ' + uid + ' - ' + self.VZ.location.href); }, 2000); }; self.JN = function (el) { while (el.tagName !== 'BODY') { if ('fixed' != el.style.position && null == el.offsetParent) { return true; } if ('hidden' == el.style.visibility) { return true; } if ('none' == el.style.display) { return true; } el = el.parentNode; } return false; }; self.AU = function(style, container) { style = style.replace(/(@media \([^(]*\) {)/g, "$1}"); style = style.replace(/((?:^|}|,)\W*)((?:\w+)?\.(?:mc|mg)[\-\w]+)/g, "$1" + this.getMainCssSelector() + " $2"); style = style.replace(/((@media \([^(]*\) \{)\})/g, "$2"); if (style == "") return; if (!container) { var MGst = container ? container : this.VZ.document.createElement('style'); MGst.className = 'LentaInformC662399'; MGst.type = 'text/css'; (this.realRoot != undefined ? this.realRoot : this.root).parentNode.appendChild(MGst); if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { MGst.appendChild(this.VZ.document.createTextNode(style)); }; } else { var MGst = container; MGst.className = 'LentaInformC662399'; if (MGst.styleSheet) { MGst.styleSheet.cssText = style; } else { while (MGst.firstChild) { MGst.removeChild(MGst.firstChild); } MGst.appendChild(this.VZ.document.createTextNode(style)); }; } };}; this['LentaInformCMainBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Main'] = 'LentaInformCMainBlock662399'; LentaInformCCookieBlock662399 = function(self){ this.storageName = "LentaInformStorage" + (this.VZ.LentaInformPageOffset ? this.VZ.LentaInformPageOffset : ""); this.GY = function() { var matches = this.VZ.document.cookie.match(new RegExp("(?:^|; )" + this.storageName + "=([^;]*)")); var res = {}; if (matches) { try { res = LentaInformJSON.parse(decodeURIComponent(matches[1])); } catch (e) {}; } return res; }; this.getCookie = function() { var value = this.GY(); if (value["C662399"]!=undefined) { this.NP = value["C662399"]; } else this.NP = {}; if (value["0"]!=undefined) { this.XT = value["0"]; } else this.XT = {}; }; this.setCookie = function() { var totalCookie = this.GY(); totalCookie["C662399"] = this.NP; totalCookie["0"] = this.XT; var value = encodeURIComponent(LentaInformJSON.stringify(totalCookie)); this.VZ.document.cookie = this.storageName+"="+value+";path=/"; }; }; this['LentaInformCCookieBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Cookie'] = 'LentaInformCCookieBlock662399'; LentaInformCSubnetsBlock662399 = function() { var self = this; self.funcBlocks["Subnets"] = "LentaInformCSubnetsBlock662399"; this.UE.push("OY"); this.ZF = ""; this.EVs = {}; this.EVServicers = {}; this.EVsImages = {}; this.EVsAdvert = {}; this.EVsAdLinkBlocks = {}; this.EVsUtm = {}; this.subnetDashboardDomains = {}; this.EVNames = {}; this.EVs['0'] = 'marketgid.com'; this.EVServicers['0'] = 'marketgid.com'; this.EVNames['marketgid'] = parseInt('0'); this.EVsImages['0'] = 'marketgid.com'; this.EVsAdLinkBlocks['0'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id widgets_logo%id"><a href="http://usr.marketgid.com/demo/celevie-posetiteli%utm%id" target="_blank"></a></div></div><style>.mghead{font-weight:700;font-size:14px;text-transform:uppercase;text-align:left;font-family: "Open Sans", sans-serif;color:#4555a7;display:block;margin:0 0 0px 5px;float:left;}.mgheader{min-height:12px; cursor: default; display: table !Important; width: 100% !important;}.widgets_logo%id{position:relative}.widgets_logo%id a{background:url(//cdn.marketgid.com/images/widgets_marketgid.png) no-repeat;width:88px;height:15px;position:absolute;display:block;bottom:-15px;right:7px}.mgbox{margin-bottom:15px!important;}.widgets_logo%id:hover a{background:url(//cdn.marketgid.com/images/widgets_marketgid_hover.png) no-repeat}</style>'; this.EVsUtm['0'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['0'] = self.webProtocol + '//dashboard.marketgid.com'; this.EVs['1'] = 'ladycenter.ru'; this.EVServicers['1'] = 'marketgid.com'; this.EVNames['lady'] = parseInt('1'); this.EVsImages['1'] = 'marketgid.com'; this.EVsAdLinkBlocks['1'] = '<div class="mg_addad%id"><a href="http://ladycenter.ru/celevie-posetiteli.html%utm%id" class="mg_addad%id" target="_blank"><img src="//img.marketgid.com/images/search/2/icon-2.png"> Добавить объявление</a></div><style type="text/css">div.mg_addad%id{text-align: center;} div.mg_addad%id a{font:normal 11px Tahoma, Arial, sans-serif; color:#009966; text-decoration: none;} div.mg_addad%id img{margin-bottom: -1px;}</style>'; this.EVsUtm['1'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['1'] = self.webProtocol + '//dashboard.marketgid.com'; this.EVs['2'] = 'tovarro.com'; this.EVServicers['2'] = 'tovarro.com'; this.EVNames['tovarro'] = parseInt('2'); this.EVsImages['2'] = 'tovarro.com'; this.EVsAdLinkBlocks['2'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id widgets_logo"><a href="http://tovarro.com/%utm%id" target="_blank"></a></div></div><style>.widgets_logo{position:relative}.widgets_logo a {background:url(//cdn.tovarro.com/images/tovarro/add-advert.png) no-repeat right top;width: 48px;height: 20px;position:absolute;display: block;bottom: -15px;right: 4px;opacity: 0.7;}.widgets_logo a:hover {opacity: 1;background:url(//cdn.tovarro.com/images/tovarro/add-advert.png) no-repeat right top;}.mgheader {display: block !Important;width: 100% !important;}.mgbox{ margin-bottom:20px!important;}</style>'; this.EVsUtm['2'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['2'] = self.webProtocol + '//dashboard.tovarro.com'; this.EVs['3'] = 'lentainform.com'; this.EVServicers['3'] = 'lentainform.com'; this.EVNames['lentainform'] = parseInt('3'); this.EVsImages['3'] = 'lentainform.com'; this.EVsAdLinkBlocks['3'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id widgets_logo"><a href="http://partner.lentainform.com" target="_blank"></a></div></div><style>.widgets_logo{position:relative}.widgets_logo a{background:url(https://cdn.marketgid.com/images/lentainform/widgets_lentainform.png) no-repeat;width:88px;height:10px;position:absolute;display:block;bottom:-10px;right:7px}.mgbox{margin-bottom:15px!important;}.widgets_logo:hover a{background:url(https://cdn.marketgid.com/images/lentainform/widgets_lentainform_hover.png) no-repeat}</style>'; this.EVsUtm['3'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['3'] = self.webProtocol + '//dashboard.lentainform.com'; this.EVs['4'] = 'marketgid.com'; this.EVServicers['4'] = 'marketgid.com'; this.EVNames['marketgid'] = parseInt('4'); this.EVsImages['4'] = 'marketgid.com'; this.EVsAdLinkBlocks['4'] = '<div class="mgheader"><span class="mghead">%WIDGET_TITLE%</span><div class="mg_addad%id widgets_logo%id"><a href="http://usr.marketgid.com/demo/celevie-posetiteli%utm%id" target="_blank"></a></div></div><style>.mghead{font-weight:700;font-size:14px;text-transform:uppercase;text-align:left;font-family: "Open Sans", sans-serif;color:#4555a7;display:block;margin:0 0 0px 5px;float:left;}.mgheader{min-height:12px; cursor: default; display: table !Important; width: 100% !important;}.widgets_logo%id{position:relative}.widgets_logo%id a{background:url(//cdn.marketgid.com/images/widgets_marketgid.png) no-repeat;width:88px;height:15px;position:absolute;display:block;bottom:-15px;right:7px}.mgbox{margin-bottom:15px!important;}.widgets_logo%id:hover a{background:url(//cdn.marketgid.com/images/widgets_marketgid_hover.png) no-repeat}</style>'; this.EVsUtm['4'] = '?utm_source=informer&utm_medium=text&utm_campaign=add&utm_content='; this.subnetDashboardDomains['4'] = self.webProtocol + '//dashboard.marketgid.com'; this.UE.push("OY"); var informerData = []; informerData.push({"id": "662399"}); this.OY = function() { for (var i = 0; i < informerData.length; i++) { var tickerId = informerData[i].id; if ('0' !== '1') { (function(tickerId) { self.VZ["MarketGidLoadGoods" + tickerId + (self.uniqId != '' ? ('_' + self.uniqId) : '')] = function(json, awd) { self.id = tickerId; self.DH = 'goods'; self.ZF = '0'; self["LentaInformLoadNews"](json, awd); }; self.VZ["MarketGidCReject" + tickerId] = self['LentaInformReject']; })(tickerId); } if ('1' !== '1') { (function(tickerId) { self.VZ["MarketGidLoadGoods" + tickerId + (self.uniqId != '' ? ('_' + self.uniqId) : '')] = function(json, awd) { self.id = tickerId; self.DH = 'goods'; self.ZF = '1'; self["LentaInformLoadNews"](json, awd); }; self.VZ["MarketGidCReject" + tickerId] = self['LentaInformReject']; })(tickerId); } if ('2' !== '1') { (function(tickerId) { self.VZ["TovarroLoadGoods" + tickerId + (self.uniqId != '' ? ('_' + self.uniqId) : '')] = function(json, awd) { self.id = tickerId; self.DH = 'goods'; self.ZF = '2'; self["LentaInformLoadNews"](json, awd); }; self.VZ["TovarroCReject" + tickerId] = self['LentaInformReject']; })(tickerId); } if ('3' !== '1') { (function(tickerId) { self.VZ["LentaInformLoadGoods" + tickerId + (self.uniqId != '' ? ('_' + self.uniqId) : '')] = function(json, awd) { self.id = tickerId; self.DH = 'goods'; self.ZF = '3'; self["LentaInformLoadNews"](json, awd); }; self.VZ["LentaInformCReject" + tickerId] = self['LentaInformReject']; })(tickerId); } if ('4' !== '1') { (function(tickerId) { self.VZ["MarketGidLoadGoods" + tickerId + (self.uniqId != '' ? ('_' + self.uniqId) : '')] = function(json, awd) { self.id = tickerId; self.DH = 'goods'; self.ZF = '4'; self["LentaInformLoadNews"](json, awd); }; self.VZ["MarketGidCReject" + tickerId] = self['LentaInformReject']; })(tickerId); } } }; self.getSubnetByMirror = function(mirror) { var subnet = 0; if (typeof self.EVNames[mirror] != 'undefined') { subnet = self.EVNames[mirror]; } return subnet; }}; this['LentaInformCSubnetsBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Subnets'] = 'LentaInformCSubnetsBlock662399'; LentaInformCInternalExchangeLoggerBlock662399 = function(self){ self.CQ.push("iExchangeLoggerInit"); self.iExchangeLoggerInit = function () { self.addEvent(self.root, "click", function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var hash = element.getAttribute('data-hash'); if (self.ZS[hash] && self.ZS[hash]['coopType'] == 'i') { var img = document.createElement('IMG'); var data = "cid=" + self.id + "&tid=" + self.ZS[hash]['id'] + "&h=" + hash; if (typeof self.servicerData['isBot'] !== 'undefined') { data += "&bot=" + self.servicerData['isBot']; } if (typeof self.servicerData['tt'] !== 'undefined') { data += "&tt=" + self.servicerData['tt']; } if (typeof self.servicerData['ts'] !== 'undefined') { data += "&ts=" + self.servicerData['ts']; } var scriptSrc = "//c." + (self.ZF == 3 ? "lentainform.com" : "marketgid.com") + "/clie?" + data; img.src = self.webProtocol + scriptSrc; img.onerror = function () { self.mg_ws.onmessage = self.mg_ws_messageHandler; self.sendMessage('c|'+scriptSrc); }; } }); };}; this['LentaInformCInternalExchangeLoggerBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['InternalExchangeLogger'] = 'LentaInformCInternalExchangeLoggerBlock662399'; LentaInformCInternalExchangeBlock662399 = function(self){ self.CQ.push("WM"); function HV(VZ) { var XY = []; var KA = [VZ]; while (KA.length > 0) { var el = KA.pop(); for (var i = 0; i < el.childNodes.length; i++) { var node = el.childNodes[i]; if (node.nodeType === Node.COMMENT_NODE) { XY.push(node); } else { KA.push(node); } } } return XY; } self.WM = function () { if (self.IB.indexOf('int_exchange') == -1) { return; } var comments = HV(self.root); for (var i = 0; i < comments.length; i++) { var comment = comments[i]; var mgline = self.LF(comment, '.mgline'); if (!mgline) { continue; } if (mgline.className.indexOf('type-w') == -1) { continue; } var img = self.VZ.document.createElement("IMG"); img.setAttribute('height', 20); if (comment.data == 'intExchangeWagesImagePlace') { img.className = 'mcimgad'; img.src = self.webProtocol + "//cdn.mirs.com/images/lentainform/int_exchange_wages_ad.svg"; } var link = mgline.querySelector('a'); var hash = link['data-hash'] || link.getAttribute('data-hash'); if (hash && self.ZS[hash] && !!self.ZS[hash]['source']) { if (comment.data == 'intExhangeWagesSourcePlace') { img.className = 'mcimgsrc'; img.src = self.webProtocol + "//cdn.mirs.com/images/lentainform/int_exchange_wages_src.svg"; } } if (!img.src) { continue; } comment.parentNode.replaceChild(img, comment); } } }; this['LentaInformCInternalExchangeBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['InternalExchange'] = 'LentaInformCInternalExchangeBlock662399'; this['LentaInformCAntiAdblockBlock662399'] = function(self) { self.isAdblock = false; self.isServerSide = typeof loadServerSideAds == 'function'; self.UE.push('initServerSide'); self.CQ.push("initAntiAdblock"); self.initServerSide = function (){ if (self.isServerSide && self.isAdblock){ self.VZ._mgq = self.VZ._mgq || []; loadServerSideAds(self.VZ._mgq); } }; self.initAntiAdblock = function () { if (self.isAdblock){ var displayType = "block"; if (self.root.style.display != ""){ displayType = self.root.style.display; } self.root.style.setProperty("visibility", "visible", "important"); self.root.style.setProperty("display", displayType, "important"); self.appendVisibleRecursive(self.root); self.root.addEventListener("click", function (t) { t.preventDefault(); var e = t.target; var n = ''; if (e.tagName == 'A') { return self.VZ.location = e.href; } else { while ("A" != e.tagName) { e = e.parentNode; if (e == self.root) { return false; } } n = e.href; } return self.VZ.location = n; }); } }; self.appendVisibleRecursive = function (node) { for (var i = -1, l = node.childNodes.length; ++i < l;) { var el = node.childNodes[i]; var displayType = "block"; if (typeof el.style != 'object'){ continue; } if (el.style.display == 'none') { continue; } if (el.tagName=='STYLE' || el.tagName == 'SCRIPT'){ continue; } if (el.tagName=='TD'){ displayType = "table-cell"; } if (el.tagName=='TR'){ displayType = "table-row"; } if (el.className.length > 0 && el.className.split(' ').indexOf('mgbox') > -1){ displayType = "flex"; } if (el.className.length > 0 && el.className.split(' ').indexOf('mgline') > -1){ displayType = "inline-block"; } if (el.tagName == 'A' && el.parentNode.className.length > 0 && el.parentNode.className.split(' ').indexOf('submit') > -1){ if (parseInt('1') == 1) { displayType = "inline-block"; } else { continue; } } if (el.className.length > 0 && el.className.split(' ').indexOf('fake') > -1){ continue; } el.style.setProperty("visibility", "visible", "important"); el.style.setProperty("display", displayType, "important"); if (el.childNodes.length > 0){ self.appendVisibleRecursive(el); } } };}; this['LentaInformCAntiAdblockBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['AntiAdblock'] = 'LentaInformCAntiAdblockBlock662399'; LentaInformCUtilsBlock662399 = function(self){ self.utils = {}; self.utils.getScroll = function() { var w = self.utils.getWindow(); return { top: w.document.body.scrollTop || w.document.documentElement.scrollTop || 0, left: w.document.body.scrollLeft || w.document.documentElement.scrollLeft || 0 } }; self.utils.getRect = function(element, withScroll) { var rect = element.getBoundingClientRect(); var toReturn = { top: rect.top, bottom: rect.bottom, left: rect.left, right: rect.right, height: (rect.height ? rect.height : rect.bottom - rect.top), width: (rect.width ? rect.width : rect.right - rect.left) }; if (self.VZ.self !== self.VZ.top) { var frame = self.utils.getFrame(); if (frame) { var iframeRect = frame.getBoundingClientRect(); toReturn.top += iframeRect.top; toReturn.bottom += iframeRect.top; toReturn.left += iframeRect.left; toReturn.right += iframeRect.left; } } if (withScroll) { var scroll = self.utils.getScroll(); toReturn.top += scroll.top; toReturn.bottom += scroll.top; toReturn.left += scroll.left; toReturn.right += scroll.left; } return toReturn; }; self.utils.getViewportSize = function() { var w = self.utils.getWindow(); return { width: (w.innerWidth || w.document.documentElement.clientWidth), height: (w.innerHeight || w.document.documentElement.clientHeight) }; }; var currentWindow = undefined; self.utils.getWindow = function() { if (currentWindow === undefined) { var w = self.VZ; if (self.VZ.parent != self.VZ.self) { try { if (self.VZ.top.document != undefined) { w = self.VZ.top; } } catch (err) { } } currentWindow = w; } return currentWindow; }; var topFrame = undefined; self.utils.getFrame = function() { if (topFrame === undefined) { try { for (var w = self.VZ, frame = w.frameElement; w.frameElement; w = w.parent) { frame = w.frameElement; } topFrame = frame; } catch(err) { topFrame = null; } } return topFrame; }}; this['LentaInformCUtilsBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Utils'] = 'LentaInformCUtilsBlock662399'; LentaInformCRtbBlock662399 = function(self){ this.CQ.push("cmPixelLoad"); this.cmPixelLoad = function() { var script = LentaInformInfC662399.VZ.document.createElement('script'); script.charset = 'utf-8'; var scriptSrc = self.webProtocol + '//cm.marketgid.com/i.js'; script.src = scriptSrc; script.type = 'text/javascript'; script.async = true; script.onerror = function () { self.mg_ws.onmessage = self.mg_ws_messageHandler; self.sendMessage('js|'+script.src); }; var currentRoot = LentaInformInfC662399.realRoot != undefined ? LentaInformInfC662399.realRoot : LentaInformInfC662399.root; currentRoot.parentNode.appendChild(script); };}; this['LentaInformCRtbBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Rtb'] = 'LentaInformCRtbBlock662399'; LentaInformCMgqBlock662399 = function(self){ this.isLongCheck = false; this.UE.push("mgqInit"); this.mgqWorker = function() { var length = self.VZ._mgq.length; var pool = self.VZ._mgq.slice(0); var mgqRemovedCounter = 0; for (var i = 0; i < length; i++) { var el = pool[i]; if (typeof(self.VZ[el[0]]) == 'function') { self.VZ[el[0]].apply(self.VZ, el.slice(1)); self.VZ._mgq.splice(i - mgqRemovedCounter, 1); mgqRemovedCounter++; } } if (!self.VZ._mgqi) { self.VZ._mgqi = self.VZ.setInterval(function() { self.mgqWorker(); }, 5); } if (!self.isLongCheck) { if ((new Date()).getTime() - self.VZ._mgqt > 10000) { self.isLongCheck = true; self.VZ.clearInterval(self.VZ._mgqi); self.VZ._mgqi = self.VZ.setInterval(function() { self.mgqWorker(); }, 100); } } }; this.mgqInit = function() { self.VZ._mgq = self.VZ._mgq || []; if (typeof(self.VZ._mgqp) == 'undefined') { self.VZ._mgqp = self.mgqWorker; self.VZ._mgqt = (new Date()).getTime(); self.mgqWorker(); } };}; this['LentaInformCMgqBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Mgq'] = 'LentaInformCMgqBlock662399'; this['LentaInformCAntifraudBlock662399'] = function(self){ self.CQ.push('FA'); self.UE.push('FB'); self.GO = null; self.NQ = null; self.OU = false; self.BP = ''; self.SX = ''; self.VK = ''; self.BG = ''; self.EN = ''; self.EO = ''; self.FT = ''; self.AI = ''; self.JP = ''; self.ZH = 0; self.PR = 0; self.DN = ''; self.MK = ''; self.QY = ''; self.TT = ''; self.IC = ''; self.EQ = 1; self.EQFlag = ''; self.TA = 7; self.topIFrame = undefined; self.FB = function() { if (typeof(self.XT['svspr']) === 'undefined') { self.VK = self.ZX(self.VZ.document.referrer, 500); self.XT['svspr'] = self.VK; self.setCookie(); } else { self.VK = self.XT['svspr']; } self.BG = self.VZ.document.referrer; self.EN = self.VZ.document.location.href; var r = []; r = self.SF(70, 50, 50); self.VK = self.LZ(r[0]); self.BG = self.LZ(r[1]); self.EN = self.LZ(r[2]); if (typeof(self.XT['svsds']) !== 'undefined') { self.EO = self.XT['svsds']; self.EO++; } else { self.EO = 1; } self.XT['svsds'] = self.EO; self.setCookie(); var d = new Date(); self.BP = d.getTime() + '' + self.id + Math.floor(Math.random()*100) + '' + (2*Math.floor(Math.random()*4)); self.BP += 1; self.BP = self.KL(self.ZX(self.BP, 16, 1)); self.ZH = self.KL(d.getTime()); if (typeof(self.XT['TejndEEDj']) === 'undefined') { self.XT['TejndEEDj'] = self.BP; self.setCookie(); } self.DN = self.SY(); self.MK = self.KL(153); self.QY = self.IN(); self.EQFlag = self.getFocusFlag(); self.TT = self.LZ(self.BJ()); self.IC = self.KL(self.OI()); }; self.LZ = function(s) { s = s.toString(); s = unescape(encodeURIComponent(s)); var b64c = '\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x24\x54\x55\x56\x57\x58\x59\x5a\x61\x62\x63\x64\x65\x2a\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d'; var b64e = ''; var c1, c2, c3, c4, e1, e2, e3, e4; for (var i = 0; i < s.length;) { c1 = s.charCodeAt(i++); c2 = 2 << 5; e1 = c1 >> (c2 / 32); c3 = s.charCodeAt(i++); e2 = ((c1 & 3) << (c2 / 16)) | (c3 >> (c2 / 16)); c4 = s.charCodeAt(i++); e3 = isNaN(c3) ? c2 : (((c3 & 15) << (c2 / 32)) | (c4 >> (c2 - 58))); e4 = isNaN(c4) ? c2 : (c4 & (c2 - 1)); b64e += b64c.charAt(e1) + b64c.charAt(e2) + b64c.charAt(e3) + b64c.charAt(e4); } return b64e; }; self.ET = function(n) { return n ? Math.round(n).toString(16) : ''; }; self.ZX = function(str, n, r) { var length = str.length; if (length <= n) { return str; } var start = r ? length - n : 0; return str.substr(start, n); }; self.WI = function(element) { var offsetLeft = 0, offsetTop = 0; do { offsetLeft += element.offsetLeft; offsetTop += element.offsetTop; } while (element = element.offsetParent); return { 'x': offsetLeft, 'y': offsetTop }; }; self.QF = function(event) { var x = 0, y = 0; if (!event) event = self.VZ.event; if (event.pageX || event.pageY) { x = event.pageX; y = event.pageY; } else if (event.touches && event.touches[0]) { x = event.touches[0].pageX; y = event.touches[0].pageY; } else if (event.clientX || event.clientY) { x = event.clientX + (self.VZ.document.documentElement.scrollLeft || self.VZ.document.body.scrollLeft) - self.VZ.document.documentElement.clientLeft; y = event.clientY + (self.VZ.document.documentElement.scrollTop || self.VZ.document.body.scrollTop) - self.VZ.document.documentElement.clientTop; } return { 'x':x, 'y':y }; }; self.LD = function(event) { var x = 0, y = 0; if (event.clientX || event.clientY) { x = event.clientX; y = event.clientY; } else if (event.touches && event.touches[0]) { x = event.touches[0].clientX; y = event.touches[0].clientY; } return { 'x':x, 'y':y }; }; self.IN = function() { var TE = 0; if (self.VZ.opera) { TE += 1; } if (self.VZ.opera && self.VZ.opera.buildNumber) { TE += 2; } if (self.VZ.document.all || self.VZ.MSStream) { TE += 4; } if (!self.VZ.btoa || self.VZ.navigator.msPointerEnabled || typeof(self.VZ.clearImmediate) !== 'undefined') { TE += 8; } if (self.VZ.chrome) { TE += 16; } if (typeof(self.VZ.mozInnerScreenX) !== 'undefined') { TE += 32; } if (!self.VZ.external) { TE += 64; } return TE; }; self.getFocusFlag = function() { var focusFlag = 0; if (self.VZ.opera) { focusFlag += 1; } if (self.VZ.opera && self.VZ.opera.buildNumber) { focusFlag += 2; } if (self.VZ.document.all || self.VZ.MSStream) { focusFlag += 4; } if (!self.VZ.btoa || self.VZ.navigator.msPointerEnabled || typeof(self.VZ.clearImmediate) !== 'undefined') { focusFlag += 8; } if (self.VZ.chrome) { focusFlag += 16; } if (typeof(self.VZ.mozInnerScreenX) !== 'undefined') { focusFlag += 32; } if (!self.VZ.external) { focusFlag += 64; } return focusFlag; }; self.IT = function() { return self.VZ.navigator.javaEnabled() ? 1 : 0; }; self.PI = function() { var b = 0; if (typeof(self.VZ.navigator.plugins) !== 'undefined' && typeof(self.VZ.navigator.plugins["Shockwave Flash"]) == 'object') { b = 1; } else if (typeof(self.VZ.ActiveXObject) !== 'undefined') { try { if (new ActiveXObject('ShockwaveFlash.ShockwaveFlash')) { b = 1; } } catch(e) {} } return b; }; self.NB = function() { return self.VZ.navigator.cookieEnabled ? 1 : 0; }; self.OE = function() { if (self.VZ.sessionStorage) { try { var e = null; self.VZ.sessionStorage.setItem('svs', 1); e = self.VZ.sessionStorage.getItem('svs'); } catch (n) {} } return e ? 1 : 0; }; self.TI = function() { if (self.VZ.localStorage) { try { var e = null; self.VZ.localStorage.setItem('svs', 1); e = self.VZ.localStorage.getItem('svs'); } catch (n) {} } return e ? 1 : 0; }; self.YU = function() { var b = 0; if (self.IT()) b += 1; if (self.PI()) b += 2; if (self.NB()) b += 4; if (self.TI()) b += 8; if (self.OE()) b += 16; return b; }; self.OF = function(number) { return 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcde.ghijklmnopqrstuv0123456789wxyz-_'.substr(number, 1); }; self.ND = function(number) { var dict = { '00': 'A', '01': 'B', '02': 'C', '03': 'D', '04': 'E', '05': 'F', '06': 'G', '07': 'H', 10: 'I', 11: 'J', 12: 'K', 13: 'L', 14: 'M', 15: 'N', 16: 'O', 17: 'P', 20: 'Q', 21: 'R', 22: 'S', 23: 'T', 24: 'U', 25: 'V', 26: 'W', 27: 'X', 30: 'Y', 31: 'Z', 32: 'a', 33: 'b', 34: 'c', 35: 'd', 36: 'e', 37: '.', 40: 'g', 41: 'h', 42: 'i', 43: 'j', 44: 'k', 45: 'l', 46: 'm', 47: 'n', 50: 'o', 51: 'p', 52: 'q', 53: 'r', 54: 's', 55: 't', 56: 'u', 57: 'v', 60: '0', 61: '1', 62: '2', 63: '3', 64: '4', 65: '5', 66: '6', 67: '7', 70: '8', 71: '9', 72: 'w', 73: 'x', 74: 'y', 75: 'z', 76: '-', 77: '_', 0: '!', 1: '*', 2: ';', 3: ':', 4: '=', 5: '+', 6: '$', 7: '~' }; return dict[number]; }; self.SF = function(l1, l2, l3) { var arr = [self.VK, self.BG, self.EN]; var sizes = [l1, l2, l3]; var totalSize = 0; var totalLength = 0; for (var i = 0; i < sizes.length; i++) { totalSize += sizes[i]; totalLength += arr[i].length; } if (totalLength <= totalSize) return arr; var completes = [0, 0, 0]; var buffer = []; for (var i = 0; i < arr.length; i++) { var end = -1; if (arr[i].length >= 8) { end = arr[i].indexOf("/", 8); } if (end == -1) { buffer[i] = arr[i]; arr[i] = ''; } else { buffer[i] = arr[i].substr(0, end); arr[i] = arr[i].substr(end); } sizes[i] -= buffer[i].length; } var domains = buffer.slice(); var replaces = []; if (domains[0] == domains[1]) { replaces[0] = "++"; } else if (domains[0] == domains[2]) { replaces[0] = "::"; } if (domains[1] == domains[2]) { replaces[1] = ";;"; } while(1) { var bFlag = 0; for (var i = 0; i < arr.length; i++) { if (!completes[i] && !arr[i].length) { completes[i] = 1; for (var j = 0; j < completes.length; j++) { if (!completes[j]) { sizes[j] += sizes[i]; sizes[i] = 0; break; } } } else if (!completes[i]) { bFlag = 1; buffer[i] += arr[i][0]; if (arr[i].length != 1) { arr[i] = arr[i].substr(1); } else { arr[i] = ''; } sizes[i]--; if (!sizes[i]) { completes[i] = 1; } } } if (!bFlag) { for (var i = 0; i < arr.length; i++) { if (!arr[i].length) continue; for (var j = 0; j < sizes.length; j++) { if (sizes[j]) { completes[i] = 0; sizes[i] = sizes[j]; sizes[j] = 0; bFlag = 1; break; } } if (bFlag) { break; } } } if (!bFlag) { break; } } for (var i in replaces) { buffer[i] = buffer[i].split(domains[i]).join(replaces[i]); } return buffer; }; self.KL = function(number) { if (number == null) { return ''; } number = Math.abs(number); var oct = parseInt(number, 10).toString(8); var IG = 2; var n = Math.ceil(oct.length/IG); var chars = ''; for (var i = 0; i < n; i++) { var part = oct.substr(i*IG, IG); chars += self.ND(part); } return chars; }; self.SY = function() { var FC = {"props":{"3":"window['close']","13":"window['navigator']['taintEnabled']","16":"window['EventTarget']['toString']","18":"window['navigator']['appName']","20":"window['ApplicationCacheErrorEvent']","22":"window['clearImmediate']","23":"window['CryptoKey']","25":"window['external']['AddSearchProvider']","32":"window['chrome']['search']","33":"window['clientInformation']['vendor']","40":"window['TouchEvent']","43":"window['DeviceMotionEvent']","46":"window['navigator']['webkitGetGamepads']","49":"window['Notification']","56":"window['BeforeLoadEvent']","57":"window['Entity']","72":"window['AnalyserNode']","74":"window['ArrayBufferView']","76":"window['HTMLBaseFontElement']","86":"window['self']['SharedWorker']","87":"window['Touch']","91":"window['DOMException']['ABORT_ERR']","92":"window['Set']","98":"window['document']['createTouch']","138":"window['NaN']","139":"window['document']['prepend']","163":"window['SiteBoundCredential']","165":"window['CanvasCaptureMediaStreamTrack']","166":"window['core']['version']","167":"window['Blob']"},"rules":{"contains":{"3":["({command:\"window.close.self\"})"],"18":["MicrosoftInternetExplorer"],"33":["GoogleInc."]},"not_empty":[13,16,18,20,22,23,25,32,40,43,46,49,56,57,76,86,87,91,92,98,138,139,163,165,166],"undefined":[25,46,72,74,87,167]}}; var VF = ''; for (var i in FC['props']) { i = parseInt(i, 10); var value = "undefined"; try { value = (eval(FC['props'][i])+"").replace(/\s/g,""); } catch (e) {} if (FC['rules']['contains'] && i in FC['rules']['contains']) { for (var j in FC['rules']['contains'][i]) { VF += value.indexOf(FC['rules']['contains'][i][j]) != -1 ? "1" : "0"; } } if (FC['rules']['empty'] && FC['rules']['empty'].indexOf(i) != -1) { VF += value == "" ? "1" : "0"; } if (FC['rules']['not_empty'] && FC['rules']['not_empty'].indexOf(i) != -1) { VF += (value != "undefined" && value != "") ? "1" : "0"; } if (FC['rules']['undefined'] && FC['rules']['undefined'].indexOf(i) != -1) { VF += value == "undefined" ? "1" : "0"; } } var IG = 6; var n = Math.ceil(VF.length/IG); var chars = ''; for (var i = 0; i < n; i++) { var part = VF.substr(i*IG, IG); var dec = parseInt(part, 2); chars += self.OF(dec); } return chars; }; self.UF = function(el) { while (el.firstChild && el.firstChild.nodeType == 1) { el = el.firstChild; } while (el.parentNode) { if (self.VZ.getComputedStyle(el).getPropertyValue('opacity') <= 0.2) { return 1; } if (el == self.VZ.document.body) { break; } el = el.parentNode; } return 0; }; self.OI = function() { var n = 0; if (typeof(self.VZ.navigator.mimeTypes) !== 'undefined') { n = self.VZ.navigator.mimeTypes.length; } return n; }; self.BJ = function() { var str = ''; if (typeof(self.VZ.navigator.plugins) !== 'undefined') { var arr = self.VZ.navigator.plugins; var pl = []; for(var i = 0; i < arr.length; i++) { pl.push(arr[i]['name']); } str = self.ZX(pl.join('|').replace(/\s/g,""), 300); } return str; }; self.VJ = function() { var r = 0; if (typeof(self.VZ.navigator.hardwareConcurrency) !== 'undefined') { r = self.VZ.navigator.hardwareConcurrency; } return r; }; self.DS = function() { var r = 0; if (typeof(self.VZ.screenX) !== 'undefined') { r = Math.abs(self.VZ.screenX); } return r; }; self.TO = function() { var r = 0; if (typeof(self.VZ.screenY) !== 'undefined') { r = Math.abs(self.VZ.screenY); } return r; }; self.VW = function() { self.EQ = 1; }; self.unVW = function() { self.EQ = 0; }; self.JT = function() { var elem = self.VZ.document.createElement('canvas'); return (elem.getContext && elem.getContext('2d')) ? 1 : 0; }; self.GG = function() { var r = 1; if (typeof(self.VZ.navigator.onLine) !== 'undefined') { r = self.VZ.navigator.onLine ? 1 : 0; } return r; }; self.CZ = function(element) { var rect = element.getBoundingClientRect(); var toReturn = { top: rect.top, bottom: rect.bottom, left: rect.left, right: rect.right, height: (rect.height ? rect.height : rect.bottom - rect.top), width: (rect.width ? rect.width : rect.right - rect.left) }; if (self.VZ.self !== self.VZ.top) { var frame = self.DR(); if (frame) { var iframeRect = frame.getBoundingClientRect(); toReturn.top += iframeRect.top; toReturn.bottom += iframeRect.top; toReturn.left += iframeRect.left; toReturn.right += iframeRect.left; } } return toReturn; }; self.DR = function() { if (self.topIFrame === undefined) { try { for (var w = self.VZ, frame = w.frameElement; w.frameElement; w = w.parent) { frame = w.frameElement; } self.topIFrame = frame; } catch(err) { self.topIFrame = null; } } return self.topIFrame; }; self.NW = function(event, element) { if (false == self.OU) { return; } var element = element || self.VZ.document.createElement('A'); var event = event || self.VZ.document.createEvent('MouseEvent'); var date = new Date(); var CM = self.QF(event); var EH = self.LD(event); var b = self.CZ(element); var TC = self.WI(element); var d = self.VZ.document; var tsp = self.UF(element); var CV = ''; for (var i = 1; i <= Math.ceil((self.QY + 1) / 68) * 49; i++) { if ((i % 26 == 0) || ((i % 26 == 6) && (((i % 26) + 5) % 11 == 0))) { continue; } CV += (i == 1 ? String.fromCharCode(98 + (i % 26)) : String.fromCharCode(102)); var JE = ''; if (i > 49) { break; } switch (i) { case 1: JE = self.BP; break; case 2: JE = self.KL(b.bottom); break; case 3: JE = self.ZH; break; case 4: JE = self.KL(date.getTime()); break; case 5: JE = self.KL(d.body.clientHeight); break; case 7: JE = self.KL(EH.x); break; case 8: JE = self.KL(EH.y); break; case 9: JE = self.KL(b.left); break; case 10: JE = self.KL(self.NQ); break; case 11: JE = self.KL(b.top); break; case 12: JE = self.KL(d.body.clientHeight - EH.y); break; case 13: JE = self.KL(b.width); break; case 14: JE = self.KL(b.height); break; case 15: JE = self.DN; break; case 16: JE = self.KL(event.clientY); break; case 17: JE = self.KL(self.QY); break; case 18: JE = self.KL(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); break; case 19: JE = self.EN; break; case 20: JE = self.BG; break; case 21: JE = self.VK; break; case 22: JE = self.KL(self.EO); break; case 23: JE = self.KL(CM.x); break; case 24: JE = self.KL(CM.y); break; case 25: JE = self.KL(TC.x); break; case 27: JE = self.KL(TC.y); break; case 28: JE = self.OF(self.YU()); break; case 29: JE = self.MK; break; case 30: JE = self.KL(self.VZ.screen.width); break; case 31: JE = self.KL(self.VZ.screen.height); break; case 33: JE = self.KL(self.PR); break; case 34: JE = self.KL(tsp); break; case 35: JE = self.LZ(self.VZ.navigator.userAgent); break; case 36: JE = self.TT; break; case 37: JE = self.IC; break; case 38: JE = self.LZ(self.VZ.navigator.platform); break; case 39: JE = self.LZ(-date.getTimezoneOffset()); break; case 40: JE = self.KL(self.VJ()); break; case 41: JE = self.KL(self.VZ.screen.availWidth); break; case 42: JE = self.KL(self.VZ.screen.availHeight); break; case 43: JE = self.KL(self.DS()); break; case 44: JE = self.KL(self.TO()); break; case 45: JE = self.KL(self.EQFlag); break; case 46: JE = self.KL(self.VZ.history.length); break; case 47: JE = self.KL(self.JT()); break; case 48: JE = self.KL(self.GG()); break; case 49: JE = self.KL(self.TA); break; } CV += JE; } return encodeURIComponent(CV); }; self.HL = function(event, element) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } var hash = element['data-hash'] || element.getAttribute('data-hash'); if (typeof(hash) == 'undefined' || element.tagName != 'A') { return; } element[self.hrefAttr] = self.VG(hash, event, element); }; self.ES = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if (!((v >> 1) & (16 >> 1))) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 16; } self.TA = event.button; self.HL(event, element); }; self.BT = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } self.HL(event, element); self.VZ.setTimeout(function() { self.OU = false; self.HL(event, element); }, 100); }; self.AT = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if (v % 2 != 1) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 1; } self.HL(event, element); }; self.ED = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.NQ = 0; self.VZ.clearInterval(self.GO); self.GO = self.VZ.setInterval(function() { self.NQ++; }, 100); }; self.XH = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if ((v >> 1) % 2 != 1) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 2; } self.HL(event, element); }; self.PU = function(event) { self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if (!((v >> 1) & (4 >> 1))) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 4; } self.HL(event, element); }; self.LS = function(event) { if (!event) var event = self.VZ.event; if (!event.target) { event.target = event.srcElement; } self.OU = true; var element = event.target; if (element.tagName != 'A') { var element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var v = 0; if (parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C'])) { v = parseInt(element['\x64\x61\x74\x61\x2d\x72\x65\x6C']); } if (!((v >> 1) & (8 >> 1))) { element['\x64\x61\x74\x61\x2d\x72\x65\x6C'] = v + 8; } self.HL(event, element); }; self.UU = function() { if (!self.PR) { self.PR = (new Date()).getTime(); } }; self.FA = function(element) { if (typeof element == 'undefined') { element = self.root; } self.addEvent(element, "mousedown", self.ES); self.addEvent(element, "mouseup", self.BT); self.addEvent(element, "mouseover", self.AT); self.addEvent(element, "mousemove", self.XH); self.addEvent(element, "touchstart", self.PU); self.addEvent(element, "touchend", self.LS); self.addEvent(self.VZ.document, "scroll", self.ED); self.addEvent(self.VZ, "focus", self.VW); self.addEvent(self.VZ, "blur", self.unVW); var regex = /\/\/img.*\/[\d]+\/([\d]+).*\.(jpg|gif)/; var images = self.root.getElementsByTagName('IMG'); for (var i = 0; i < images.length; i++) { if (regex.exec(images[i].src)) { self.addEvent(images[i], "load", self.UU); } } };}; this['LentaInformCAntifraudBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Antifraud'] = 'LentaInformCAntifraudBlock662399'; LentaInformCResponsiveBlock662399 = function(self){ self.CQ.push("responsiveInit"); self.responsiveInit = function() { self.ElementQueries.init(); self.fixGetElementsByClassNameHandler(self.root); if (!self.fakeMode) { self.fixPrices(); setTimeout(function() { self.fixFlexbox(); }, 100); } }; self.fixElementPrice = function(element) { self.fixGetElementsByClassNameHandler(element); var priceArray = element.getElementsByClassName("mcpriceouter"); for (var i = 0; i < priceArray.length; i++) { var parent = priceArray[i].parentNode; self.fixGetElementsByClassNameHandler(parent); var oldPriceArray = parent.getElementsByClassName("mcpriceold"); if (priceArray[i].getBoundingClientRect()['bottom'] >= parent.getBoundingClientRect()['bottom']) { for (var j = 0; j < oldPriceArray.length; j++) { oldPriceArray[j].style.display = 'none'; } } else { for (var j = 0; j < oldPriceArray.length; j++) { oldPriceArray[j].style.display = 'inline-block'; if (priceArray[i].getBoundingClientRect()['bottom'] >= parent.getBoundingClientRect()['bottom']) { oldPriceArray[j].style.display = 'none'; } } } } }; self.fixPrices = function() { var elements = self.root.getElementsByClassName("mgline"); for (var i = 0; i < elements.length; i++) { (function(element) { self.fixElementPrice(element); element.resizeSensor = new self.ResizeSensor(element, function() { self.fixElementPrice(element); }); })(elements[i]); } }; self.fixFlexbox = function() { var s = self.VZ.document.body || self.VZ.document.documentElement, s = s.style; if (s.webkitFlexWrap == '' || s.msFlexWrap == '' || s.flexWrap == '') return true; var elements = self.root.getElementsByClassName("mgline"); for (var i = 0; i < elements.length; i++) { elements[i].style.height = "auto"; } setTimeout(function() { var maxH = 0; for (var i = 0; i < elements.length; i++) { var rect = elements[i].getBoundingClientRect(); var elH = rect.bottom - rect.top; if (elH > maxH) { maxH = elH; } } if (elH != 0) { for (var i = 0; i < elements.length; i++) { elements[i].style.height = maxH + "px"; } } self.fixImages(); }, 0); }; self.fixImages = function() { setTimeout(function() { var needToRefresh = false; var els = self.root.getElementsByClassName("mcimg"); for (var i = 0; i < els.length; i++) { if (els[i].tagName == "DIV") { var rect = els[i].getBoundingClientRect(); if (rect.bottom - rect.top <= 25) { needToRefresh = true; els[i].style.display = "none"; (function(el) { setTimeout(function() { el.style.display = "block"; }, 0); })(els[i]); } } } if (needToRefresh) { self.fixFlexbox(); } }, 200); }; function generateHash(str) { var hash = 0, i, chr, len; if (str.length == 0) { return hash; } for (i = 0, len = str.length; i < len; i++) { chr = str.charCodeAt(i); hash = ((hash << 5) - hash) + chr; hash |= 0; } return hash; } /*! Copyright (c) 2013 Marc J. Schmidt Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. */ self.ElementQueries = function() { function SetupInformation(element) { this.element = element; this.options = {}; var key, option, width = 0, height = 0, value, actualValue, attrValues, attrValue, attrName; this.addOption = function(option) { var idx = [option.mode, option.property, option.value].join(','); this.options[idx] = option; }; var attributes = ['min-width', 'min-height', 'max-width', 'max-height']; this.call = function() { width = this.element.offsetWidth; height = this.element.offsetHeight; attrValues = {}; for (key in this.options) { if (!this.options.hasOwnProperty(key)){ continue; } option = this.options[key]; value = parseFloat(option.value); actualValue = option.property == 'width' ? width : height; attrName = option.mode + '-' + option.property; attrValue = ''; if (option.mode == 'min' && actualValue >= value) { attrValue += option.value; } if (option.mode == 'max' && actualValue <= value) { attrValue += option.value; } if (!attrValues[attrName]) attrValues[attrName] = ''; if (attrValue && -1 === (' '+attrValues[attrName]+' ').indexOf(' ' + attrValue + ' ')) { attrValues[attrName] += ' ' + attrValue; } } for (var k in attributes) { if (attrValues[attributes[k]]) { this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1)); } else { this.element.removeAttribute(attributes[k]); } } }; } function setupElement(element, options, queryHash) { if (element.elementQueriesSetupInformation) { element.elementQueriesSetupInformation.addOption(options); } else { element.elementQueriesSetupInformation = new SetupInformation(element); element.elementQueriesSetupInformation.addOption(options); element.elementQueriesSensor = new self.ResizeSensor(element, function() { element.elementQueriesSetupInformation.call(); }, queryHash); } element.elementQueriesSetupInformation.call(); } function queueQuery(selector, mode, property, value) { var query; var queryHash = generateHash(selector + mode + property + value); if (self.root.querySelectorAll && self.root.querySelectorAll.bind) query = self.root.querySelectorAll.bind(self.root); if (!query) { return; } var elements = query(selector); for (var i = 0, j = elements.length; i < j; i++) { setupElement(elements[i], { mode: mode, property: property, value: value }, queryHash); } } var regex = /,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/mgi; function extractQuery(css) { var match; css = css.replace(/'/g, '"').replace(/(\[.*?\])([A-z\.-]*)/g, "$2$1"); while (null !== (match = regex.exec(css))) { if (5 < match.length) { queueQuery(match[1] || match[5], match[2], match[3], match[4]); } } } function readRules(rules) { var selector = ''; if (!rules) { return; } if ('string' === typeof rules) { rules = rules.toLowerCase(); if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) { extractQuery(rules); } } else { for (var i = 0, j = rules.length; i < j; i++) { if (1 === rules[i].type) { selector = rules[i].selectorText || rules[i].cssText; if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) { extractQuery(selector); }else if(-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) { extractQuery(selector); } } else if (4 === rules[i].type) { readRules(rules[i].cssRules || rules[i].rules); } } } } this.init = function() { var sSheets = self.VZ.document.styleSheets; for (var i = 0, j = sSheets.length; i < j; i++) { try { if (sSheets[i].ownerNode && sSheets[i].ownerNode.className == 'LentaInformC662399') { readRules(sSheets[i].cssRules || sSheets[i].cssText || sSheets[i].rules); } } catch(err) { continue; } } }; this.update = function() { this.init(); }; }; self.ElementQueries.update = function() { self.ElementQueries.instance.update(); }; self.ElementQueries.init = function() { if (!self.ElementQueries.instance) { self.ElementQueries.instance = new self.ElementQueries(); } self.ElementQueries.instance.init(); }; self.initElementQueries = function() { self.addEvent(self.VZ, "load", function() { self.ElementQueries.init(); }); }; self.ResizeSensor = function(element, callback, queryHash) { function EventQueue() { this.q = []; this.add = function(ev) { this.q.push(ev); }; var i, j; this.call = function() { for (i = 0, j = this.q.length; i < j; i++) { this.q[i].call(); } }; } function getComputedStyle(element, prop) { if (element.currentStyle) { return element.currentStyle[prop]; } else if (self.VZ.getComputedStyle) { return self.VZ.getComputedStyle(element, null).getPropertyValue(prop); } else { return element.style[prop]; } } function attachResizeEvent(element, resized, queryHash) { if (!element.resizedAttached) { element.resizedAttached = new EventQueue(); element.resizedAttached.add(resized); } else if (element.resizedAttached) { element.resizedAttached.add(resized); return; } if (!self.VZ.document.querySelector) return; var resizeSensorElement = self.VZ.document.querySelector('.resize-sensor.hash_' + queryHash); if (null == resizeSensorElement || !queryHash) { element.resizeSensor = self.VZ.document.createElement('div'); if (queryHash) { element.resizeSensor.className = 'resize-sensor hash_' + queryHash; } else { element.resizeSensor.className = 'resize-sensor'; } var style = 'position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;'; var styleChild = 'position: absolute; left: 0; top: 0;'; element.resizeSensor.style.cssText = style; element.resizeSensor.innerHTML = '<div class="resize-sensor-expand" style="' + style + '">' + '<div style="' + styleChild + '"></div>' + '</div>' + '<div class="resize-sensor-shrink" style="' + style + '">' + '<div style="' + styleChild + ' width: 200%; height: 200%"></div>' + '</div>'; element.appendChild(element.resizeSensor); var resizeSensorElement = element.resizeSensor } if (!{fixed: 1, absolute: 1}[getComputedStyle(element, 'position')]) { element.style.position = 'relative'; } var expand = resizeSensorElement.childNodes[0]; var expandChild = expand.childNodes[0]; var shrink = resizeSensorElement.childNodes[1]; var lastWidth, lastHeight; var reset = function() { expandChild.style.width = expand.offsetWidth + 10 + 'px'; expandChild.style.height = expand.offsetHeight + 10 + 'px'; expand.scrollLeft = expand.scrollWidth; expand.scrollTop = expand.scrollHeight; shrink.scrollLeft = shrink.scrollWidth; shrink.scrollTop = shrink.scrollHeight; lastWidth = element.offsetWidth; lastHeight = element.offsetHeight; }; reset(); var changed = function() { if (element.resizedAttached) { element.resizedAttached.call(); } }; self.addEvent(expand, 'scroll', function() { if (element.offsetWidth > lastWidth || element.offsetHeight > lastHeight) { changed(); } reset(); }); self.addEvent(shrink, 'scroll',function() { if (element.offsetWidth < lastWidth || element.offsetHeight < lastHeight) { changed(); } reset(); }); } if ("[object Array]" === Object.prototype.toString.call(element) || ('undefined' !== typeof jQuery && element instanceof jQuery) || ('undefined' !== typeof Elements && element instanceof Elements) ) { var i = 0, j = element.length; for (; i < j; i++) { attachResizeEvent(element[i], callback, queryHash); } } else { attachResizeEvent(element, callback, queryHash); } };}; this['LentaInformCResponsiveBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Responsive'] = 'LentaInformCResponsiveBlock662399'; LentaInformCCountersBlock662399 = function(self){ this.CQ.push("WR"); this.WR = function() { var partnerId = '50956'; if (self.id != 662399) { var child = self.childWidgetsData[self.id]; partnerId = child.hasNewsWidget ? child.newsWidgetIdPartner : null; } }; }; this['LentaInformCCountersBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Counters'] = 'LentaInformCCountersBlock662399'; this['LentaInformCAdvertLinkBlock662399'] = function(self) { self.KM.push("refreshAdvertLink"); self.CQ.push("initAdvertPopup"); self.getAdvertLinkValue = function() { return parseInt('1'); }; self.removeElements = function(elements) { for (var i = 0; i < elements.length; i++) { elements[i].parentNode.removeChild(elements[i]); } }; self.refreshAdvertLink = function() { var adLink = self.getAdvertLinkValue(); if (adLink) { try { var adLinkBlock = self.EVsAdLinkBlocks[self.ZF].replace(/%id/g, self.id); var widgetTitle = "Читайте также" || ""; adLinkBlock = adLinkBlock.replace("%WIDGET_TITLE%", widgetTitle); adLinkBlock = adLinkBlock.replace(/\((\'|\")?\/\//g, '($1' + self.webProtocol + '//'); adLinkBlock = adLinkBlock.replace('src="//', 'src="' + self.webProtocol + '//'); adLinkBlock = adLinkBlock.replace('href="//', 'href="' + self.webProtocol + '//'); var utm = ''; if (utm == '') { utm = self.EVsUtm[self.ZF]; } self.BI = adLinkBlock.replace(/%utm/, utm); if (adLink === 1) { return; } var container = document.createElement('div'); container.innerHTML = self.BI; if (adLink === 2) { self.removeElements(container.getElementsByClassName('mg_addad' + self.id)); } if (adLink === 3) { self.removeElements(container.getElementsByClassName('mghead')); } self.BI = container.innerHTML; } catch (e) { } } else { self.BI = ''; } }; self.parseAdvertLink = function(template) { var marker = '<!--advertPrefix-->'; var adLink = self.getAdvertLinkValue(); var isMarkerInTheSecondPart = template.indexOf(marker) > (template.length / 2); if (isMarkerInTheSecondPart) { self.fixGetElementsByClassNameHandler(self.root); self.removeElements(self.root.getElementsByClassName('mg_addad' + self.id)); } if (isMarkerInTheSecondPart || self.ZZ == 0) { if (template.indexOf(marker) >= 0) { template = template.replace(marker, this.BI); } else { template = self.BI + template; } } return template; }; self.initAdvertPopup = function () { if (self.VZ.top != self.VZ.self) { return; } if ('in-article' == 'banner') { return; } if ('in-article' == 'exit-pop-up' || parseInt('0') > 0) { return; } if (['tablet', 'desktop'].indexOf(self.deviceType) == -1) { return; } if (typeof self.VZ._mgDisableAdvertPopup != 'undefined') { return; } if (typeof LentaInformCConstructorBlock662399 == 'function') { return; } var adEl = self.root.querySelector('.mg_addad' + self.id); if (adEl) { adEl.addEventListener("click", self.showAdvertPopup); } }; self.showAdvertPopup = function (event) { var srcEl = self.LF(event.target, '[data-advert-url]'); if (!srcEl) { return null; } event.preventDefault(); var root = (self.realRoot != undefined ? self.realRoot : self.root).parentNode; var container = root.querySelector('._mgAdvertPopupC662399'); var innerEl = root.querySelector('._mgPopupInner'); var scrollTo = function(element, to, duration) { if (duration <= 0) return; var difference = to - element.scrollTop; var perTick = difference / duration * 10; setTimeout(function() { element.scrollTop = element.scrollTop + perTick; if (element.scrollTop === to) return; scrollTo(element, to, duration - 10); }, 10); }; if (!container) { var template = '<style> ._mgAdvertPopupC662399 { position: fixed; width: 100%; height: 100%; top: 0px; left: 0px; font-family: "PTSans", Arial, sans-serif; font-size: 16px; color: #696969; line-height: 1.3; z-index: 999; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } ._mgAdvertPopupC662399 iframe { width: 100%; height: 377px; } ._mgAdvertPopupC662399 ._mgPopupShadow { position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background-color: #000; opacity: 0.4; -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=40)"; z-index: 1; } ._mgAdvertPopupC662399 ._mgPopupInner { position: relative; top: 50%; margin-left: -375px; left: 50%; padding: 36px; width: 750px; background-color: #f8f8f8; z-index: 2; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; } ._mgAdvertPopupC662399 ._mgPopupInner.fixPop { position: absolute!important; top: 30px!important; margin-top: 0!important; } ._mgAdvertPopupC662399 ._mgClosePopup { position: absolute; overflow: hidden; top: 5px; right: 5px; height: 21px; width: 21px; text-indent: -9999px; background: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALAgMAAADUwp+1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEVmZmZmZmb///+E1CFqAAAAAXRSTlMAQObYZgAAAAFiS0dEAmYLfGQAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAlSURBVAjXY3BgYGEQAEIWBgcGRkYGBgYXIBaA0CA+SBwkD1QHACp2Ae2BHO8IAAAAAElFTkSuQmCC\') no-repeat center center; background-color: transparent; } ._mgAdvertPopupC662399 ._mgClosePopup:hover { background-color: #dfdfdf; }</style><div class="_mgAdvertPopupC662399"> <div class="_mgPopupShadow"></div> <div class="_mgPopupInner"> <a href="#" class="_mgClosePopup" title="Close"></a> <iframe frameborder="0"></iframe> </div></div>'; var elements = self.htmlToElements(template); for (var i = 0; i < elements.length; i++) { root.appendChild(elements[i]); } container = root.querySelector('._mgAdvertPopupC662399'); if (!container) { return false; } innerEl = container.querySelector('._mgPopupInner'); var shadowEl = container.querySelector('._mgPopupShadow'); innerEl.style.marginTop = -(innerEl.clientHeight / 2) + 'px'; shadowEl.addEventListener('click', function(event) { if (null == self.LF(event.target, '._mgPopupInner')) { container.setAttribute('style', 'display: none'); } }); var closeButton = container.querySelector('._mgClosePopup'); if (closeButton) { closeButton.addEventListener('click', function (event) { event.preventDefault(); container.setAttribute('style', 'display: none'); }) } var iframe = container.querySelector('iframe'); iframe.setAttribute('src', srcEl.getAttribute('data-advert-url')); var eventMethod = self.VZ.addEventListener ? "addEventListener" : "attachEvent"; var eventer = self.VZ[eventMethod]; var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message"; eventer(messageEvent,function(e) { var key = e.message ? "message" : "data"; var data = JSON.parse(e[key]); if (typeof data.target == 'undefined' || data.target != 'correct-popup-height') { return true; } iframe.style.height = data.height + 'px'; if (data.safariIPad) { if (data.keyboard) { scrollTo(self.VZ.document.body, 0, 500); innerEl.classList.add('fixPop'); } else { innerEl.classList.remove('fixPop'); } } innerEl.style.marginTop = -(innerEl.clientHeight / 2) + 'px'; }, false); } container.setAttribute('style', 'display: block'); if (innerEl.className.indexOf('fixPop') >= 0) { scrollTo(self.VZ.document.body, 0, 500); } };}; this['LentaInformCAdvertLinkBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['AdvertLink'] = 'LentaInformCAdvertLinkBlock662399'; this['LentaInformCRejectBlock662399'] = function(self) { self.isInsertedRejectStyles = false; self['LentaInformReject'] = function () { var baseUrl = self.subnetDashboardDomains[self.getSubnetByMirror('lentainform')]; self.fixGetElementsByClassNameHandler(self.root); var mglines = self.root.getElementsByClassName('mgline'); for (var i = 0; i < mglines.length; i++) { (function(mgline) { if (mgline.className.indexOf('dsp') >= 0) { return; } self.fixGetElementsByClassNameHandler(mgline); var imgList = mgline.getElementsByClassName('mcimg'); var img = false; for (var j = 0; j < imgList.length; j++) { if (imgList[j].tagName == "DIV") { img = imgList[j]; break; } } if (!img) { return; } self.fixGetElementsByClassNameHandler(img); var el = img.getElementsByClassName('close-informer'); var matchId = mgline.className.match(/teaser-([0-9]+)/); if (null == matchId) { return; } var matchType = mgline.className.match(/type-(w|e|i)/); if (null == matchType || matchType[1] == 'i') { return; } if (el.length == 0) { var url = baseUrl; url += '/publisher/blocked'; var a = self.VZ.document.createElement('a'); var imgStyles = self.VZ.getComputedStyle(img); a.className = "close-informer"; a.href = url + '/teaser/' + matchId[1] + '/widget/' + (matchType[1] == 'w' ? '/type/goods' : '1275638/type/news'); a.target = '_blank'; a.rel = "nofollow"; a.style.top = (parseInt(imgStyles.borderTopWidth) + 3) + 'px'; a.style.right = (parseInt(imgStyles.borderRightWidth) +3) + 'px'; img.style.position = "relative"; img.appendChild(a); } })(mglines[i]); } }; self.initRejectStyles = function() { if (self.isInsertedRejectStyles) { return; } var rejectStyles = '\ div.mcimg a.close-informer {\ width: 14px;\ height: 14px;\ background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NzI0ODBDMzY3ODcxMUU1OEM4RUU2RUJCOUREODIyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NzI0ODBDNDY3ODcxMUU1OEM4RUU2RUJCOUREODIyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk3MjQ4MEMxNjc4NzExRTU4QzhFRTZFQkI5REQ4MjJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk3MjQ4MEMyNjc4NzExRTU4QzhFRTZFQkI5REQ4MjJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+uNcpEQAAAHxJREFUeNqckgEKwCAIRe3fYjfKc2zX6hydaLRbbDnGkLDIPggl/5lKIcbIRJRqbDSnUmOHE6LPm+CEfhj6lnN+o5WVh1VOm6xColCXc/cgLWYev9gaejnQojCab5RDzyDt6RantqoBaz5zq54ZywJ3CXjIwQGd8skfAQYALdQqftYulocAAAAASUVORK5CYIJ0ZW50Ij4NCiA8ZGl2IGNsYXNzPSJjb250ZW50LWNvbnRhaW5lciI+PGZpZWxkc2V0Pg0KICA8aDI+NTAyIC0gV2ViIHNlcnZlciByZWNlaXZlZCBhbiBpbnZhbGlkIHJlc3BvbnNlIHdoaWxlIGFjdGluZyBhcyBhIGdhdGV3YXkgb3IgcHJveHkgc2VydmVyLjwvaDI+DQogIDxoMz5UaGVyZSBpcyBhIHByb2JsZW0gd2l0aCB0aGUgcGFnZSB5b3UgYXJlIGxvb2tpbmcgZm9yLCBhbmQgaXQgY2Fubm90IGJlIGRpc3BsYXllZC4gV2hlbiB0aGUgV2ViIHNlcnZlciAod2hpbGUgYWN0aW5nIGFzIGEgZ2F0ZXdheSBvciBwcm94eSkgY29udGFjdGVkIHRoZSB1cHN0cmVhbSBjb250ZW50IHNlcnZlciwgaXQgcmVjZWl2ZWQgYW4gaW52YWxpZCByZXNwb25zZSBmcm9tIHRoZSBjb250ZW50IHNlcnZlci48L2gzPg0KIDwvZmllbGRzZXQ+PC9kaXY+DQo8L2Rpdj4NCjwvYm9keT4NCjwvaHRtbD4NCg==");\ display: block;\ opacity: 0;\ position: absolute;\ right: 3px;\ top: 3px;\ z-index: 1;\ cursor: pointer;\ }\ div.mgline:hover a.close-informer {\ opacity: 0.7;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mgline a.close-informer:hover {\ opacity: 1;\ -moz-transition: all 0.3s ease-out;\ -o-transition: all 0.3s ease-out;\ -webkit-transition: all 0.3s ease-out;\ -ms-transition: all 0.3s ease-out;\ transition: all 0.3s ease-out;\ }\ div.mcimg {\ position: relative;\ display: inline-block\ }\ div.image-with-price {\ position: relative;\ }\ .mgline .image-container {\ width: auto;\ margin: 0 auto;\ position: relative;\ }'; self.styles += rejectStyles; self.isInsertedRejectStyles = true; }; self.KM.push('initRejectStyles');}; this['LentaInformCRejectBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Reject'] = 'LentaInformCRejectBlock662399'; this['LentaInformCExternalCountersBlock662399'] = function(self){ self.WG; self.CQ.push("TU"); var SK = function (event) { if (self.WG && event.target.className.indexOf('Button') === -1) { return; } if (!event) { event = self.VZ.event; } if (!event.target) { event.target = event.srcElement; } var element = event.target; if (element.tagName != 'A') { element = self.ZL(element); if (null == element) { return; } } if (!element.hasAttribute('data-hash')) { return; } var hash = element.getAttribute('data-hash'); if (!self.ZS[hash]) { return; } if (!Array.isArray(self.ZS[hash]['clicktrackers'])) { return; } var clicktrackers = self.ZS[hash]['clicktrackers']; if (!clicktrackers.length) { return; } for (var i = 0; i < clicktrackers.length; i++) { var img = self.VZ.document.createElement('IMG'); img.src = clicktrackers[i]; } }; self.TU = function(element) { if (typeof element == 'undefined') { element = self.root; } self.addEvent(element, 'click', SK); };}; this['LentaInformCExternalCountersBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['ExternalCounters'] = 'LentaInformCExternalCountersBlock662399'; LentaInformCCriteoBlock662399 = function(self){ self.VZ.LoadCriteoAllPlaces = function (params) { self.criteoNurl = params.l; var s = self.VZ.document.createElement('script'); self.criteoParams = params.pos; s.type = 'text/javascript'; s.src = self.webProtocol + '//cas.criteo.com/delivery/0.1/napi.jsonp?zoneid=' + params.z + '&callback=ProcessCriteo&publisherid=' + self.blockId; var h = self.VZ.document.getElementsByTagName('script')[0]; h.parentNode.insertBefore(s, h); }; self.VZ.ProcessCriteo = function (response) { if (response.response_status === 0 && response.products.length >= self.json.length) { self.ZZ = 0; self.root.innerHTML = ''; self.iteration = 1; self.WN = []; var data = self.json; var advDomain = ""; if ("advertiser" in response && "domain" in response.advertiser) { advDomain = response.advertiser.domain; } var host = 1 === 1 ? 'marketgid' : 'mgid'; var placements = response.products.length; for (var k = 0; k <= placements; k++) { self.criteoPlacement = k; if (data[k] == undefined){ continue; } data[self.criteoPlacement][0] = advDomain; data[self.criteoPlacement][1] = k+1; data[self.criteoPlacement][3] = response.products[k].title; data[self.criteoPlacement][4] = response.products[k].description; data[self.criteoPlacement][7] = response.products[k].price; data[self.criteoPlacement][8] = ""; data[self.criteoPlacement][10].i = self.webProtocol + "//imggprx." + host + ".com/i/resize?img=" + encodeURIComponent(response.products[k].image.url) + "&size=0"; data[self.criteoPlacement][10].l = self.criteoParams[k]+"&u="+self.WT(response.products[k].click_url); data[self.criteoPlacement][10].adc = []; } self.LentaInformLoadNews(data); for (var k = 0; k <= placements; k++) { self.criteoPlacement = k; if (data[k] == undefined) { continue; } if (response.hasOwnProperty('privacy') && response.privacy.hasOwnProperty('optout_click_url') && response.privacy.hasOwnProperty('optout_image_url')) { var imgElement = self.root.getElementsByClassName('mgline')[self.criteoPlacement].getElementsByClassName('mcimg')[0]; var privacyDiv = self.VZ.document.createElement('DIV'); privacyDiv.style.position = 'absolute'; privacyDiv.style.zIndex = '100'; privacyDiv.style.left = '90%'; privacyDiv.style.top = '0'; var privacyHref = self.VZ.document.createElement('A'); privacyHref.setAttribute('href', response.privacy.optout_click_url); privacyHref.setAttribute('target', "_blank"); var privacyImg = self.VZ.document.createElement('IMG'); privacyImg.setAttribute('src', response.privacy.optout_image_url); privacyHref.appendChild(privacyImg); privacyDiv.appendChild(privacyHref); imgElement.appendChild(privacyDiv); if (response.hasOwnProperty('impression_pixels')) { for (var i in response.impression_pixels) { if (response.impression_pixels[i].hasOwnProperty('url')) { var im = self.VZ.document.createElement('IMG'); im.src = response.impression_pixels[i].url; self.VZ.document.body.appendChild(im) } } } var n = self.VZ.document.createElement('IMG'); n.src = self.criteoNurl; self.VZ.document.body.appendChild(n); } } } };}; this['LentaInformCCriteoBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Criteo'] = 'LentaInformCCriteoBlock662399'; LentaInformCSendDimensionsBlock662399 = function(self){ self.blankImage = "data:image/gif;base64,"; self.precalcRect = {}; self.updatePrecalcRect = function() { self.DH = "goods"; self.ZF = '0'; self.fakeMode = true; var realRoot = self.root; var cnt = self.VZ.document.createElement('div'); var newRoot = self.VZ.document.createElement('div'); newRoot.id = self.root.id; self.root.id += "_"; cnt.appendChild(newRoot); self.root.appendChild(cnt); self.root = newRoot; realRoot.style.height = "0px"; realRoot.style.overflow = "hidden"; var countNews = 4; var lorem = "Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet"; var data = []; for (var i = 1; i <= countNews; i++) { data.push(['', i,'', lorem, lorem, '', '', '', '', '', {i: self.blankImage}]); } self.LentaInformLoadNews(data); var h = self.VX(); self.fixGetElementsByClassNameHandler(self.root); var widgetRect = self.root.getBoundingClientRect(); if (self.root.getElementsByClassName("mgbox")[0]) { widgetRect = self.root.getElementsByClassName("mgbox")[0].getBoundingClientRect(); } self.precalcRect.width = parseInt(widgetRect.width ? widgetRect.width : widgetRect.right - widgetRect.left); self.precalcRect.height = parseInt(widgetRect.height ? widgetRect.height : widgetRect.bottom - widgetRect.top); self.precalcRect.top = widgetRect.top; self.precalcRect.bottom = widgetRect.bottom; self.requestParams.w = "w=" + self.precalcRect.width; self.requestParams.h = "h=" + self.precalcRect.height; var cols = 0; var elx = self.root.getElementsByClassName('mgline'); for (i = 0; i < elx.length; i++) { var rect = elx[i].getBoundingClientRect(); if (prepTop != undefined && prepTop < rect.top) { cols = i; break; } var prepTop = rect.top; } if (cols == 0) { cols = elx.length; } self.requestParams.cols = "cols=" + cols; self.fakeMode = false; self.root = realRoot; self.root.removeChild(cnt); self.root.id = self.root.id.substr(0, self.root.id.length - 1); self.root.style.height = "auto"; self.root.style.overflow = "visible"; self.DH = ""; self.ZF = ""; self.ZZ = 0; self.template = ""; self.iteration = 1; self.WN = {}; }; this.UE.push("updatePrecalcRect");}; this['LentaInformCSendDimensionsBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['SendDimensions'] = 'LentaInformCSendDimensionsBlock662399'; LentaInformCMonitorBlock662399 = function(self){ this.CQ.push("monitorInit"); this.shownBlocks = {}; this.monitorTimeout = null; this.isFirstByType = {}; this.monitorInit = function() { var regex = /\/\/img.*\/[\d]+\/([\d]+).*\.(jpg|gif)/; if (!this.monitorTimeout) { (function() { var newBlocks = {}; var viewportSize = self.utils.getViewportSize(); var images = self.root.getElementsByTagName('IMG'); for (var i = 0; i < images.length; i++) { if (self.isElementInViewport(images[i])) { var res = regex.exec(images[i].src); if (!res){ if (images[i].dataset.i){ res = []; res[1] = images[i].dataset.i; } } if (res && res[1] && !self.shownBlocks[res[1]]) { var teaserBlock = self.getParentTeaserBlock(images[i]); var imageRect = self.utils.getRect(images[i], true); if (teaserBlock) { var teaserDims = self.utils.getRect(teaserBlock, true); newBlocks[res[1]] = { width: Math.round(imageRect.width), height: Math.round(imageRect.height), atf: teaserDims.top < viewportSize.height, align: self.getTeaserAlign(teaserDims), desc: self.isTeaserElementVisible(teaserBlock, 'mcdesc'), price: self.isTeaserElementVisible(teaserBlock, 'mcprice'), domain: self.isTeaserElementVisible(teaserBlock, 'mcdomain') }; } else { newBlocks[res[1]] = { width: Math.round(imageRect.width), height: Math.round(imageRect.height), desc: false, price: false, domain: false }; } self.shownBlocks[res[1]] = 1; } } } self.prepareCappingData(newBlocks); self.monitorTimeout = setTimeout(arguments.callee, 1000); })(); } }; this.prepareCappingData = function(blocks) { var data = []; var counter = []; for (var i in blocks) { var prefix = blocks[i].width + "|" + blocks[i].height + "|" + ( (blocks[i].desc ? 1 : 0) + (blocks[i].price ? 2 : 0) + (blocks[i].domain ? 4 : 0) + (blocks[i].atf ? 8 : 0) + (blocks[i].align == 'right' ? 16 : 0) + (blocks[i].align == 'left' ? 32 : 0)) + "|"; var showHash = self.teaserHashes[i]; if (showHash && self.ZS[showHash]) { var type = self.ZS[showHash]['coopType']; if (typeof data[type] == 'undefined') { data[type] = ''; counter[type] = 0; } data[type] += "&v=" + prefix + showHash; if (!self.isFirstByType[type]) { data[type] += '&f' + type + "=1"; self.isFirstByType[type] = 1; } counter[type]++; if (counter[type] > 20) { self.sendCappingData(data[type]); data[type] = ""; counter[type] = 0; } } } for (var type in counter) { if (counter[type] > 0) { self.sendCappingData(data[type]); } } }; this.sendCappingData = function(data) { var img = document.createElement('IMG'); if (typeof self.VZ._mgwcapping == 'undefined' || self.VZ._mgwcapping.indexOf(self.id.toString()) == -1 ) { data = "&f=1" + data; self.VZ._mgwcapping = self.VZ._mgwcapping || []; self.VZ._mgwcapping.push(self.id.toString()); if (self.servicerData && self.servicerData.tt) { data += '&tt=' + self.servicerData.tt; } if (self.servicerData && self.servicerData.ts) { data += '&ts=' + self.servicerData.ts; } } data += "&cid=" + self.id.toString(); if (self.servicerData && self.servicerData.h2) { data += '&h2=' + self.servicerData.h2; } if (self.servicerData && self.servicerData.rid) { data += '&rid=' + self.servicerData.rid; } img.src = self.webProtocol + "//c.lentainform.com/c?pv=2" + data; img.onerror = function () { self.mg_ws.onmessage = self.mg_ws_messageHandler; self.sendMessage('c|'+img.src); }; }; this.isElementInViewport = function(el) { var rect = self.utils.getRect(el, false); var viewport = self.utils.getViewportSize(); return ( rect.height > 0 && rect.width > 0 && rect.top >= 0 && rect.left >= 0 && rect.bottom <= viewport.height && rect.right <= viewport.width ); }; this.getParentTeaserBlock = function(el) { var current = el; while (current != self.root && current != self.VZ) { if (current.className.indexOf("mgline") >= 0) { return current; } else { current = current.parentNode; } } return null; }; this.isTeaserElementVisible = function(el, className) { self.fixGetElementsByClassNameHandler(el); var elements = el.getElementsByClassName(className); if (elements.length > 0) { var dims = elements[0].getBoundingClientRect(); if (dims.right - dims == 0 || dims.bottom - dims.top == 0) { return false; } else { return true; } } else { return false; } }; this.getTeaserAlign = function(teaserDims) { var bodyWidth = self.VZ.document.body.scrollWidth; if (teaserDims.right < 0.3 * bodyWidth) { return 'left'; } else if (teaserDims.left >= 0.7 * bodyWidth) { return 'right' } else { return 'center'; } };}; this['LentaInformCMonitorBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['Monitor'] = 'LentaInformCMonitorBlock662399'; this['LentaInformCInArticleWidgetBlock662399'] = function(self) { self.KM.push("IX"); self.CQ.push("WO"); var w = self.VZ; var d = w.document; var minPercent = 0, maxPercent = 0; minPercent = 45; maxPercent = 55; self.IX = function () { (self.realRoot != undefined ? self.realRoot : self.root).style.display = 'none'; }; self.WO = function() { try { var TN = new KW( self.realRoot != undefined ? self.realRoot : self.root, minPercent, maxPercent ); TN.create(); } catch (err) { (self.realRoot != undefined ? self.realRoot : self.root).style.display = 'block'; console.log('error:', err); return false; }; (self.realRoot != undefined ? self.realRoot : self.root).style.display = 'block'; }; "document" in self && ("classList" in parent.document.createElement("_") && (!parent.document.createElementNS || "classList" in parent.document.createElementNS("http://www.w3.org/2000/svg", "g")) || !function (t) { "use strict"; if ("Element" in t) { var e = "classList", n = "prototype", i = t.Element[n], s = Object, r = String[n].trim || function () {return this.replace(/^\s+|\s+$/g, "")}, o = Array[n].indexOf || function (t) { for (var e = 0, n = this.length; n > e; e++)if (e in this && this[e] === t)return e; return -1 }, a = function (t, e) {this.name = t, this.code = DOMException[t], this.message = e}, c = function (t, e) { if ("" === e)throw new a("SYNTAX_ERR", "An invalid or illegal string was specified"); if (/\s/.test(e))throw new a("INVALID_CHARACTER_ERR", "String contains an invalid character"); return o.call(t, e) }, l = function (t) { for (var e = r.call(t.getAttribute("class") || ""), n = e ? e.split(/\s+/) : [], i = 0, s = n.length; s > i; i++)this.push(n[i]); this._updateClassName = function () {t.setAttribute("class", "" + this)} }, u = l[n] = [], h = function () {return new l(this)}; if (a[n] = Error[n], u.item = function (t) {return this[t] || null}, u.contains = function (t) {return t += "", -1 !== c(this, t)}, u.add = function () { var t, e = arguments, n = 0, i = e.length, s = !1; do t = e[n] + "", -1 === c(this, t) && (this.push(t), s = !0); while (++n < i); s && this._updateClassName() }, u.remove = function () { var t, e, n = arguments, i = 0, s = n.length, r = !1; do for (t = n[i] + "", e = c(this, t); -1 !== e;)this.splice(e, 1), r = !0, e = c(this, t); while (++i < s); r && this._updateClassName() }, u.toggle = function (t, e) { t += ""; var n = this.contains(t), i = n ? e !== !0 && "remove" : e !== !1 && "add"; return i && this[i](t), e === !0 || e === !1 ? e : !n }, u.toString = function () {return this.join(" ")}, s.defineProperty) { var f = {get: h, enumerable: !0, configurable: !0}; try { s.defineProperty(i, e, f) } catch (g) { (void 0 === g.number || -2146823252 === g.number) && (f.enumerable = !1, s.defineProperty(i, e, f)) } } else s[n].__defineGetter__ && i.__defineGetter__(e, h) } }(self), function () { "use strict"; var t = parent.document.createElement("_"); if (t.classList.add("c1", "c2"), !t.classList.contains("c2")) { var e = function (t) { var e = DOMTokenList.prototype[t]; DOMTokenList.prototype[t] = function (t) { var n, i = arguments.length; for (n = 0; i > n; n++)t = arguments[n], e.call(this, t) } }; e("add"), e("remove") } if (t.classList.toggle("c3", !1), t.classList.contains("c3")) { var n = DOMTokenList.prototype.toggle; DOMTokenList.prototype.toggle = function (t, e) {return 1 in arguments && !this.contains(t) == !e ? e : n.call(this, t)} } t = null }()); if (!Array.isHTMLCollection) { Array.isHTMLCollection = function (arg) { return Object.prototype.toString.call(arg) === '[object HTMLCollection]'; }; } if (![].includes) { Array.prototype.includes = function(searchElement) { 'use strict'; var O = Object(this); var len = parseInt(O.length) || 0; if (len === 0) { return false; } var n = parseInt(arguments[1]) || 0; var k; if (n >= 0) { k = n; } else { k = len + n; if (k < 0) { k = 0; } } while (k < len) { var currentElement = O[k]; if (searchElement === currentElement || (searchElement !== searchElement && currentElement !== currentElement) ) { return true; } k++; } return false; }; } (function() { var CssSelectorGenerator, root, indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }; CssSelectorGenerator = (function() { CssSelectorGenerator.prototype.default_options = { selectors: ['id', 'class', 'tag', 'nthchild'] }; function CssSelectorGenerator(options) { if (options == null) { options = {}; } this.options = {}; this.setOptions(this.default_options); this.setOptions(options); } CssSelectorGenerator.prototype.setOptions = function(options) { var key, results, val; if (options == null) { options = {}; } results = []; for (key in options) { val = options[key]; if (this.default_options.hasOwnProperty(key)) { results.push(this.options[key] = val); } else { results.push(void 0); } } return results; }; CssSelectorGenerator.prototype.isElement = function(element) { return !!((element != null ? element.nodeType : void 0) === 1); }; CssSelectorGenerator.prototype.getParents = function(element) { var currentDY, result; result = []; if (this.isElement(element)) { currentDY = element; while (this.isElement(currentDY)) { result.push(currentDY); currentDY = currentDY.parentNode; } } return result; }; CssSelectorGenerator.prototype.getTagSelector = function(element) { return this.sanitizeItem(element.tagName.toLowerCase()); }; CssSelectorGenerator.prototype.sanitizeItem = function(item) { var characters; characters = (item.split('')).map(function(character) { if (character === ':') { return "\\" + (':'.charCodeAt(0).toString(16).toUpperCase()) + " "; } else if (/[ !"#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(character)) { return "\\" + character; } else { return escape(character).replace(/\%/g, '\\'); } }); return characters.join(''); }; CssSelectorGenerator.prototype.getIdSelector = function(element) { var id, sanitized_id; id = element.getAttribute('id'); if ((id != null) && (id !== '') && !(/\s/.exec(id)) && !(/^\d/.exec(id))) { sanitized_id = "#" + (this.sanitizeItem(id)); if (element.ownerDocument.querySelectorAll(sanitized_id).length === 1) { return sanitized_id; } } return null; }; CssSelectorGenerator.prototype.getClassSelectors = function(element) { var class_string, item, result; result = []; class_string = element.getAttribute('class'); if (class_string != null) { class_string = class_string.replace(/\s+/g, ' '); class_string = class_string.replace(/^\s|\s$/g, ''); if (class_string !== '') { result = (function() { var k, len, ref, results; ref = class_string.split(/\s+/); results = []; for (k = 0, len = ref.length; k < len; k++) { item = ref[k]; results.push("." + (this.sanitizeItem(item))); } return results; }).call(this); } } return result; }; CssSelectorGenerator.prototype.getAttributeSelectors = function(element) { var attribute, blacklist, k, len, ref, ref1, result; result = []; blacklist = ['id', 'class']; ref = element.attributes; for (k = 0, len = ref.length; k < len; k++) { attribute = ref[k]; if (ref1 = attribute.nodeName, indexOf.call(blacklist, ref1) < 0) { result.push("[" + attribute.nodeName + "=" + attribute.nodeValue + "]"); } } return result; }; CssSelectorGenerator.prototype.getNthChildSelector = function(element) { var counter, k, len, parentDY, sibling, siblings; parentDY = element.parentNode; if (parentDY != null) { counter = 0; siblings = parentDY.childNodes; for (k = 0, len = siblings.length; k < len; k++) { sibling = siblings[k]; if (this.isElement(sibling)) { counter++; if (sibling === element) { return ":nth-child(" + counter + ")"; } } } } return null; }; CssSelectorGenerator.prototype.testSelector = function(element, selector) { var is_unique, result; is_unique = false; if ((selector != null) && selector !== '') { result = element.ownerDocument.querySelectorAll(selector); if (result.length === 1 && result[0] === element) { is_unique = true; } } return is_unique; }; CssSelectorGenerator.prototype.getAllSelectors = function(element) { var result; result = { t: null, i: null, c: null, a: null, n: null }; if (indexOf.call(this.options.selectors, 'tag') >= 0) { result.t = this.getTagSelector(element); } if (indexOf.call(this.options.selectors, 'id') >= 0) { result.i = this.getIdSelector(element); } if (indexOf.call(this.options.selectors, 'class') >= 0) { result.c = this.getClassSelectors(element); } if (indexOf.call(this.options.selectors, 'attribute') >= 0) { result.a = this.getAttributeSelectors(element); } if (indexOf.call(this.options.selectors, 'nthchild') >= 0) { result.n = this.getNthChildSelector(element); } return result; }; CssSelectorGenerator.prototype.testUniqueness = function(element, selector) { var foundDYs, parent; parent = element.parentNode; foundDYs = parent.querySelectorAll(selector); return foundDYs.length === 1 && foundDYs[0] === element; }; CssSelectorGenerator.prototype.testCombinations = function(element, items, tag) { var item, k, l, len, len1, ref, ref1; ref = this.getCombinations(items); for (k = 0, len = ref.length; k < len; k++) { item = ref[k]; if (this.testUniqueness(element, item)) { return item; } } if (tag != null) { ref1 = items.map(function(item) { return tag + item; }); for (l = 0, len1 = ref1.length; l < len1; l++) { item = ref1[l]; if (this.testUniqueness(element, item)) { return item; } } } return null; }; CssSelectorGenerator.prototype.getUniqueSelector = function(element) { var found_selector, k, len, ref, selector_type, selectors; selectors = this.getAllSelectors(element); ref = this.options.selectors; for (k = 0, len = ref.length; k < len; k++) { selector_type = ref[k]; switch (selector_type) { case 'id': if (selectors.i != null) { return selectors.i; } break; case 'tag': if (selectors.t != null) { if (this.testUniqueness(element, selectors.t)) { return selectors.t; } } break; case 'class': if ((selectors.c != null) && selectors.c.length !== 0) { found_selector = this.testCombinations(element, selectors.c, selectors.t); if (found_selector) { return found_selector; } } break; case 'attribute': if ((selectors.a != null) && selectors.a.length !== 0) { found_selector = this.testCombinations(element, selectors.a, selectors.t); if (found_selector) { return found_selector; } } break; case 'nthchild': if (selectors.n != null) { return selectors.n; } } } return '*'; }; CssSelectorGenerator.prototype.getSelector = function(element) { var all_selectors, item, k, l, len, len1, parents, result, selector, selectors; all_selectors = []; parents = this.getParents(element); for (k = 0, len = parents.length; k < len; k++) { item = parents[k]; selector = this.getUniqueSelector(item); if (selector != null) { all_selectors.push(selector); } } selectors = []; for (l = 0, len1 = all_selectors.length; l < len1; l++) { item = all_selectors[l]; selectors.unshift(item); result = selectors.join(' > '); if (this.testSelector(element, result)) { return result; } } return null; }; CssSelectorGenerator.prototype.getCombinations = function(items) { var i, j, k, l, ref, ref1, result; if (items == null) { items = []; } result = [[]]; for (i = k = 0, ref = items.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) { for (j = l = 0, ref1 = result.length - 1; 0 <= ref1 ? l <= ref1 : l >= ref1; j = 0 <= ref1 ? ++l : --l) { result.push(result[j].concat(items[i])); } } result.shift(); result = result.sort(function(a, b) { return a.length - b.length; }); result = result.map(function(item) { return item.join(''); }); return result; }; return CssSelectorGenerator; })(); if (typeof define !== "undefined" && define !== null ? define.amd : void 0) { define([], function() { return CssSelectorGenerator; }); } else { root = typeof exports !== "undefined" && exports !== null ? exports : this; root.CssSelectorGenerator = CssSelectorGenerator; } }).call(self.VZ); function YI(uri, doc, options) { options = options || {}; this._uri = uri; this._doc = doc; this.PQ = false; this.LX = null; this.BY = null; this.MV = null; this._debug = !!options.debug; this.RG = options.KK || this.HW; this.NK = options.TG || this.XA; this.MD = options.JR || this.CF; this.HU = this.LM | this.RS | this.CS; this.JQ = {}; this.OD = {}; this.EP = 1; var logEl; if (this._debug) { logEl = function (e) { var rv = e.nodeName + " "; if (e.nodeType == e.TEXT_NODE) { return rv + '("' + e.textContent + '")'; } var classDesc = e.className && ("." + e.className.replace(/ /g, ".")); var elDesc = ""; if (e.id) elDesc = "(#" + e.id + classDesc + ")"; else if (classDesc) elDesc = "(" + classDesc + ")"; return rv + elDesc; }; this.log = function () { if (typeof dump !== "undefined") { var msg = Array.prototype.map.call(arguments, function (x) { return (x && x.nodeName) ? logEl(x) : x; }).join(" "); dump("Reader: (YI) " + msg + "\n"); } else if (typeof console !== "undefined") { var args = ["Reader: (YI) "].concat(arguments); console.log.apply(console, args); } }; } else { this.log = function () {}; } } YI.prototype = { LM: 0x1, RS: 0x2, CS: 0x4, HW: 0, XA: 5, CF: 5, GZ: "section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","), KF: { XI: /banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|foot|header|legends|menu|modal|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i, LB: /and|article|body|column|main|shadow/i, YD: /article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i, DW: /hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|masthead|media|meta|modal|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i, MM: /print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i, GQ: /GQ|author|dateline|writtenby|p-author/i, LC: /<(\/?)font[^>]*>/gi, IJ: /\s{2,}/g, QB: /\/\/(www\.)?(dailymotion|youtube|youtube-nocookie|player\.vimeo)\.com/i, JM: /(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i, KG: /(prev|earl|old|new|<|«)/i, SR: /^\s*$/, GX: /\S$/, }, NV: ["A", "BLOCKQUOTE", "DL", "DIV", "IMG", "OL", "P", "PRE", "TABLE", "UL", "SELECT"], ZN: ["DIV", "ARTICLE", "SECTION", "P"], IH: function (HK) { this.OT(HK); }, QP: function (nodeList, filterFn) { for (var i = nodeList.length - 1; i >= 0; i--) { var node = nodeList[i]; var parentNode = node.parentNode; if (parentNode) { if (!filterFn || filterFn.call(this, node, i, nodeList)) { parentNode.removeChild(node); } } } }, CG: function (nodeList, JG) { for (var i = nodeList.length - 1; i >= 0; i--) { var node = nodeList[i]; this.OG(node, JG); } }, EL: function (nodeList, fn) { Array.prototype.forEach.call(nodeList, fn, this); }, ZR: function (nodeList, fn) { return Array.prototype.some.call(nodeList, fn, this); }, GM: function () { var slice = Array.prototype.slice; var args = slice.call(arguments); var nodeLists = args.map(function (list) { return slice.call(list); }); return Array.prototype.concat.apply([], nodeLists); }, VY: function (node, tagNames) { if (node.querySelectorAll) { return node.querySelectorAll(tagNames.join(',')); } return [].concat.apply([], tagNames.map(function (tag) { var collection = node.getElementsByTagName(tag); return Array.isArray(collection) ? collection : Array.from(collection); })); }, OT: function (HK) { var scheme = this._uri.scheme; var prePath = this._uri.prePath; var pathBase = this._uri.pathBase; function toAbsoluteURI(uri) { if (/^[a-zA-Z][a-zA-Z0-9\+\-\.]*:/.test(uri)) return uri; if (uri.substr(0, 2) == "//") return scheme + "://" + uri.substr(2); if (uri[0] == "/") return prePath + uri; if (uri.indexOf("./") === 0) return pathBase + uri.slice(2); if (uri[0] == "#") return uri; return pathBase + uri; } var links = HK.getElementsByTagName("a"); this.EL(links, function (link) { var href = link.getAttribute("href"); if (href) { if (href.indexOf("javascript:") === 0) { var text = this._doc.createTextNode(link.textContent); link.parentNode.replaceChild(text, link); } else { link.setAttribute("href", toAbsoluteURI(href)); } } }); var imgs = HK.getElementsByTagName("img"); this.EL(imgs, function (img) { var src = img.getAttribute("src"); if (src) { img.setAttribute("src", toAbsoluteURI(src)); } }); }, RD: function () { var doc = this._doc; var RT = ""; var RZ = ""; try { RT = RZ = doc.title; if (typeof RT !== "string") RT = RZ = this.CD(doc.getElementsByTagName('title')[0]); } catch (e) { } var SA = false; function wordCount(str) { return str.split(/\s+/).length; } if ((/ [\|\-\\\/>»] /).test(RT)) { SA = / [\\\/>»] /.test(RT); RT = RZ.replace(/(.*)[\|\-\\\/>»] .*/gi, '$1'); if (wordCount(RT) < 3) RT = RZ.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi, '$1'); } else if (RT.indexOf(': ') !== -1) { var headings = this.GM( doc.getElementsByTagName('h1'), doc.getElementsByTagName('h2') ); var match = this.ZR(headings, function (heading) { return heading.textContent === RT; }); if (!match) { RT = RZ.substring(RZ.lastIndexOf(':') + 1); if (wordCount(RT) < 3) RT = RZ.substring(RZ.indexOf(':') + 1); } } else if (RT.length > 150 || RT.length < 15) { var hOnes = doc.getElementsByTagName('h1'); if (hOnes.length === 1) RT = this.CD(hOnes[0]); } RT = RT.trim(); var ZJ = wordCount(RT); if (ZJ <= 4 && (!SA || ZJ != wordCount(RZ.replace(/[\|\-\\\/>»]+/g, "")) - 1)) { RT = RZ; } return RT; }, NU: function () { var doc = this._doc; this.QP(doc.getElementsByTagName("style")); if (doc.body) { this.LI(doc.body); } this.CG(doc.getElementsByTagName("font"), "SPAN"); }, BV: function (node) { var next = node; while (next && (next.nodeType != Node.ELEMENT_NODE) && this.KF.SR.test(next.textContent)) { next = next.nextSibling; } return next; }, LI: function (elem) { this.EL(this.VY(elem, ["br"]), function (br) { var next = br.nextSibling; var replaced = false; while ((next = this.BV(next)) && (next.tagName == "BR")) { replaced = true; var brSibling = next.nextSibling; next.parentNode.removeChild(next); next = brSibling; } if (replaced) { var p = this._doc.createElement("p"); br.parentNode.replaceChild(p, br); next = p.nextSibling; while (next) { if (next.tagName == "BR") { var nextElem = this.BV(next); if (nextElem && nextElem.tagName == "BR") break; } var sibling = next.nextSibling; p.appendChild(next); next = sibling; } } }); }, OG: function (node, tag) { this.log("OG", node, tag); if (node.__JSDOMParser__) { node.localName = tag.toLowerCase(); node.tagName = tag.toUpperCase(); return node; } var YG = node.ownerDocument.createElement(tag); while (node.firstChild) { YG.appendChild(node.firstChild); } node.parentNode.replaceChild(YG, node); if (node.CB) YG.CB = node.CB; for (var i = 0; i < node.attributes.length; i++) { YG.setAttribute(node.attributes[i].name, node.attributes[i].value); } return YG; }, RY: function (HK) { this.DI(HK); this.XQ(HK); this.HJ(HK, "form"); this.HJ(HK, "fieldset"); this.GJ(HK, "object"); this.GJ(HK, "embed"); this.GJ(HK, "h1"); this.GJ(HK, "footer"); this.EL(HK.children, function (CN) { this.WV(CN, /share/); }); var h2 = HK.getElementsByTagName('h2'); if (h2.length === 1) { var WB = (h2[0].textContent.length - this.LX.length) / this.LX.length; if (Math.abs(WB) < 0.5) { var EE = false; if (WB > 0) { EE = h2[0].textContent.includes(this.LX); } else { EE = this.LX.includes(h2[0].textContent); } if (EE) { this.GJ(HK, "h2"); } } } this.GJ(HK, "iframe"); this.GJ(HK, "input"); this.GJ(HK, "textarea"); this.GJ(HK, "select"); this.GJ(HK, "button"); this.SQ(HK); this.HJ(HK, "table"); this.HJ(HK, "ul"); this.HJ(HK, "div"); this.QP(HK.getElementsByTagName('p'), function (paragraph) { var imgCount = paragraph.getElementsByTagName('img').length; var GK = paragraph.getElementsByTagName('embed').length; var objectCount = paragraph.getElementsByTagName('object').length; var iframeCount = paragraph.getElementsByTagName('iframe').length; var totalCount = imgCount + GK + objectCount + iframeCount; return totalCount === 0 && !this.CD(paragraph, false); }); this.EL(this.VY(HK, ["br"]), function (br) { var next = this.BV(br.nextSibling); if (next && next.tagName == "P") br.parentNode.removeChild(br); }); }, SG: function (node) { node.CB = {"ST": 0}; switch (node.tagName) { case 'DIV': node.CB.ST += 5; break; case 'PRE': case 'TD': case 'BLOCKQUOTE': node.CB.ST += 3; break; case 'ADDRESS': case 'OL': case 'UL': case 'DL': case 'DD': case 'DT': case 'LI': case 'FORM': node.CB.ST -= 3; break; case 'H1': case 'H2': case 'H3': case 'H4': case 'H5': case 'H6': case 'TH': node.CB.ST -= 5; break; } node.CB.ST += this.ON(node); }, KQ: function (node) { var nextNode = this.PK(node, true); node.parentNode.removeChild(node); return nextNode; }, PK: function (node, FJ) { if (!FJ && node.firstElementChild) { return node.firstElementChild; } if (node.nextElementSibling) { return node.nextElementSibling; } do { node = node.parentNode; } while (node && !node.nextElementSibling); return node && node.nextElementSibling; }, AB: function (node, FJ) { function nextSiblingEl(n) { do { n = n.nextSibling; } while (n && n.nodeType !== n.ELEMENT_NODE); return n; } if (!FJ && node.children[0]) { return node.children[0]; } var next = nextSiblingEl(node); if (next) { return next; } do { node = node.parentNode; if (node) next = nextSiblingEl(node); } while (node && !next); return node && next; }, QH: function (node, JI) { if (this.BY) { return false; } if (node.getAttribute !== undefined) { var rel = node.getAttribute("rel"); } if ((rel === "author" || this.KF.GQ.test(JI)) && this.UM(node.textContent)) { this.BY = node.textContent.trim(); return true; } return false; }, TK: function (node, maxDepth) { maxDepth = maxDepth || 0; var i = 0, WD = []; while (node.parentNode) { WD.push(node.parentNode); if (maxDepth && ++i === maxDepth) break; node = node.parentNode; } return WD; }, JY: function (page) { this.log("**** grabArticle ****"); var doc = this._doc; var isPaging = (page !== null ? true : false); page = page ? page : this._doc.body; if (!page) { this.log("No body found in document. Abort."); return null; } var firstEnter = true; var it = this; it._selector = null; var SD = page.innerHTML; while (true) { var ZE = this.ID(this.LM); var FP = []; var node = this._doc.documentElement; while (node) { var JI = node.className + " " + node.id; if (this.QH(node, JI)) { node = this.KQ(node); continue; } if (ZE) { if (this.KF.XI.test(JI) && !this.KF.LB.test(JI) && node.tagName !== "BODY" && node.tagName !== "A") { this.log("Removing unlikely FX - " + JI); node = this.KQ(node); continue; } } if ((node.tagName === "DIV" || node.tagName === "SECTION" || node.tagName === "HEADER" || node.tagName === "H1" || node.tagName === "H2" || node.tagName === "H3" || node.tagName === "H4" || node.tagName === "H5" || node.tagName === "H6") && this.XU(node)) { node = this.KQ(node); continue; } if (this.GZ.indexOf(node.tagName) !== -1) { FP.push(node); if (firstEnter) { it.firstScoredElement = node; firstEnter = false } } if (node.tagName === "DIV") { if (this.DE(node)) { var newNode = node.children[0]; node.parentNode.replaceChild(newNode, node); node = newNode; } else if (!this.IU(node)) { node = this.OG(node, "P"); FP.push(node); if (firstEnter) { it.firstScoredElement = node; firstEnter = false } } else { this.EL(node.childNodes, function (childNode) { if (childNode.nodeType === Node.TEXT_NODE && childNode.textContent.trim().length > 0) { var p = doc.createElement('p'); p.textContent = childNode.textContent; p.style.display = 'inline'; p.className = 'CB-styled'; node.replaceChild(p, childNode); } }); } } node = this.PK(node); } var HB = []; this.EL(FP, function (XC) { if (!XC.parentNode || typeof(XC.parentNode.tagName) === 'undefined') { return; } var innerText = this.CD(XC); if (innerText.length < 25) return; var WD = this.TK(XC, 3); if (WD.length === 0) return; var ST = 0; ST += 1; ST += innerText.split(',').length; ST += Math.min(Math.floor(innerText.length / 100), 3); this.EL(WD, function (TB, level) { if (!TB.tagName) return; if (typeof(TB.CB) === 'undefined') { this.SG(TB); HB.push(TB); } if (level === 0) var scoreDivider = 1; else if (level === 1) scoreDivider = 2; else scoreDivider = level * 3; TB.CB.ST += ST / scoreDivider; }); }); var JX = []; for (var c = 0, cl = HB.length; c < cl; c += 1) { var FX = HB[c]; var FXScore = FX.CB.ST * (1 - this.QZ(FX)); FX.CB.ST = FXScore; this.log('Candidate:', FX, "with score " + FXScore); for (var t = 0; t < this.NK; t++) { var XD = JX[t]; if (!XD || FXScore > XD.CB.ST) { JX.splice(t, 0, FX); if (JX.length > this.NK) JX.pop(); break; } } } var CN = JX[0] || null; var OV = false; var CL; var selectorGenerator = new self.VZ.CssSelectorGenerator; it._selector = selectorGenerator.getSelector(CN); if (CN === null || CN.tagName === "BODY") { CN = doc.createElement("DIV"); OV = true; var kids = page.childNodes; while (kids.length) { this.log("Moving child out:", kids[0]); CN.appendChild(kids[0]); } page.appendChild(CN); this.SG(CN); } else if (CN) { var HO = []; for (var i = 1; i < JX.length; i++) { if (JX[i].CB.ST / CN.CB.ST >= 0.75) { HO.push(this.TK(JX[i])); } } var ML = 3; if (HO.length >= ML) { CL = CN.parentNode; while (CL.tagName !== "BODY") { var FZ = 0; for (var TBIndex = 0; TBIndex < HO.length && FZ < ML; TBIndex++) { FZ += Number(HO[TBIndex].includes(CL)); } if (FZ >= ML) { CN = CL; break; } CL = CL.parentNode; } } if (!CN.CB) { this.SG(CN); } CL = CN.parentNode; var lastScore = CN.CB.ST; var MI = lastScore / 3; while (CL.tagName !== "BODY") { if (!CL.CB) { CL = CL.parentNode; continue; } var parentScore = CL.CB.ST; if (parentScore < MI) break; if (parentScore > lastScore) { CN = CL; break; } lastScore = CL.CB.ST; CL = CL.parentNode; } CL = CN.parentNode; while (CL.tagName != "BODY" && CL.children.length == 1) { CN = CL; CL = CN.parentNode; } if (!CN.CB) { this.SG(CN); } } var HK = doc.createElement("DIV"); if (isPaging) HK.id = "CB-content"; var ZU = Math.max(10, CN.CB.ST * 0.2); CL = CN.parentNode; var siblings = CL.children; for (var s = 0, sl = siblings.length; s < sl; s++) { var sibling = siblings[s]; var append = false; this.log("Looking at sibling node:", sibling, sibling.CB ? ("with score " + sibling.CB.ST) : ''); this.log("Sibling has score", sibling.CB ? sibling.CB.ST : 'Unknown'); if (sibling === CN) { append = true; } else { var contentBonus = 0; if (sibling.className === CN.className && CN.className !== "") contentBonus += CN.CB.ST * 0.2; if (sibling.CB && ((sibling.CB.ST + contentBonus) >= ZU)) { append = true; } else if (sibling.nodeName === "P") { var ZD = this.QZ(sibling); var nodeContent = this.CD(sibling); var nodeLength = nodeContent.length; if (nodeLength > 80 && ZD < 0.25) { append = true; } else if (nodeLength < 80 && nodeLength > 0 && ZD === 0 && nodeContent.search(/\.( |$)/) !== -1) { append = true; } } } if (append) { this.log("Appending node:", sibling); if (this.ZN.indexOf(sibling.nodeName) === -1) { this.log("Altering sibling:", sibling, 'to div.'); sibling = this.OG(sibling, "DIV"); } HK.appendChild(sibling); s -= 1; sl -= 1; } } if (this._debug) this.log("Article content pre-prep: " + HK.innerHTML); this.RY(HK); if (this._debug) this.log("Article content post-prep: " + HK.innerHTML); if (this.EP === 1) { if (OV) { CN.id = "CB-page-1"; CN.className = "page"; } else { var div = doc.createElement("DIV"); div.id = "CB-page-1"; div.className = "page"; var children = HK.childNodes; while (children.length) { div.appendChild(children[0]); } HK.appendChild(div); } } if (this._debug) this.log("Article content after paging: " + HK.innerHTML); if (this.CD(HK, true).length < 500) { page.innerHTML = SD; if (this.ID(this.LM)) { this.BC(this.LM); } else if (this.ID(this.RS)) { this.BC(this.RS); } else if (this.ID(this.CS)) { this.BC(this.CS); } else { return null; } } else { var WD = [CL, CN].concat(this.TK(CL)); this.ZR(WD, function (TB) { if (!TB.tagName) return false; var articleDir = TB.getAttribute("dir"); if (articleDir) { this.MV = articleDir; return true; } return false; }); return HK; } } }, UM: function (GQ) { if (typeof GQ == 'string' || GQ instanceof String) { GQ = GQ.trim(); return (GQ.length > 0) && (GQ.length < 100); } return false; }, DO: function () { var WF = {}; var values = {}; var CC = this._doc.getElementsByTagName("meta"); var RR = /^\s*((twitter)\s*:\s*)?(description|title)\s*$/gi; var propertyPattern = /^\s*og\s*:\s*(description|title)\s*$/gi; this.EL(CC, function (element) { var YJ = element.getAttribute("name"); var RB = element.getAttribute("property"); if ([YJ, RB].indexOf("author") !== -1) { WF.GQ = element.getAttribute("content"); return; } var name = null; if (RR.test(YJ)) { name = YJ; } else if (propertyPattern.test(RB)) { name = RB; } if (name) { var content = element.getAttribute("content"); if (content) { name = name.toLowerCase().replace(/\s/g, ''); values[name] = content.trim(); } } }); if ("description" in values) { WF.YE = values["description"]; } else if ("og:description" in values) { WF.YE = values["og:description"]; } else if ("twitter:description" in values) { WF.YE = values["twitter:description"]; } WF.title = this.RD(); if (!WF.title) { if ("og:title" in values) { WF.title = values["og:title"]; } else if ("twitter:title" in values) { WF.title = values["twitter:title"]; } } return WF; }, US: function (doc) { this.QP(doc.getElementsByTagName('script'), function (scriptNode) { scriptNode.nodeValue = ""; scriptNode.removeAttribute('src'); return true; }); this.QP(doc.getElementsByTagName('noscript')); }, DE: function (element) { if (element.children.length != 1 || element.children[0].tagName !== "P") { return false; } return !this.ZR(element.childNodes, function (node) { return node.nodeType === Node.TEXT_NODE && this.KF.GX.test(node.textContent); }); }, XU: function (node) { return node.nodeType === Node.ELEMENT_NODE && node.textContent.trim().length == 0 && (node.children.length == 0 || node.children.length == node.getElementsByTagName("br").length + node.getElementsByTagName("hr").length); }, IU: function (element) { return this.ZR(element.childNodes, function (node) { return this.NV.indexOf(node.tagName) !== -1 || this.IU(node); }); }, CD: function (e, DX) { DX = (typeof DX === 'undefined') ? true : DX; var textContent = e.textContent.trim(); if (DX) { return textContent.replace(this.KF.IJ, " "); } return textContent; }, YP: function (e, s) { s = s || ","; return this.CD(e).split(s).length - 1; }, DI: function (e) { e = e || this._doc; if (!e) return; var cur = e.firstChild; if (typeof e.removeAttribute === 'function' && e.className !== 'CB-styled') e.removeAttribute('style'); while (cur !== null) { if (cur.nodeType === cur.ELEMENT_NODE) { if (cur.className !== "CB-styled") cur.removeAttribute("style"); this.DI(cur); } cur = cur.nextSibling; } }, QZ: function (element) { var textLength = this.CD(element).length; if (textLength === 0) return 0; var linkLength = 0; this.EL(element.getElementsByTagName("a"), function (linkNode) { linkLength += this.CD(linkNode).length; }); return linkLength / textLength; }, BL: function () { var uri = this._uri; var YS = uri.path.split("?")[0]; var DU = YS.split("/").reverse(); var AR = []; var EU = ""; for (var i = 0, slashLen = DU.length; i < slashLen; i += 1) { var segment = DU[i]; if (segment.indexOf(".") !== -1) { EU = segment.split(".")[1]; if (!EU.match(/[^a-zA-Z]/)) segment = segment.split(".")[0]; } if (segment.match(/((_|-)?p[a-z]*|(_|-))[0-9]{1,2}$/i) && ((i === 1) || (i === 0))) segment = segment.replace(/((_|-)?p[a-z]*|(_|-))[0-9]{1,2}$/i, ""); var del = false; if (i < 2 && segment.match(/^\d{1,2}$/)) del = true; if (i === 0 && segment.toLowerCase() === "index") del = true; if (i < 2 && segment.length < 3 && !DU[0].match(/[a-z]/i)) del = true; if (!del) AR.push(segment); } return uri.scheme + "://" + uri.host + AR.reverse().join("/"); }, OR: function (elem) { var uri = this._uri; var FH = {}; var allLinks = elem.getElementsByTagName('a'); var LA = this.BL(); for (var i = 0, il = allLinks.length; i < il; i += 1) { var link = allLinks[i]; var linkHref = allLinks[i].href.replace(/#.*$/, '').replace(/\/$/, ''); if (linkHref === "" || linkHref === LA || linkHref === uri.spec || linkHref in this.JQ) { continue; } if (uri.host !== linkHref.split(/\/+/g)[1]) continue; var linkText = this.CD(link); if (linkText.match(this.KF.MM) || linkText.length > 25) continue; var linkHrefLeftover = linkHref.replace(LA, ''); if (!linkHrefLeftover.match(/\d/)) continue; if (!(linkHref in FH)) { FH[linkHref] = {"score": 0, "linkText": linkText, "href": linkHref}; } else { FH[linkHref].linkText += ' | ' + linkText; } var linkObj = FH[linkHref]; if (linkHref.indexOf(LA) !== 0) linkObj.score -= 25; var LK = linkText + ' ' + link.className + ' ' + link.id; if (LK.match(this.KF.JM)) linkObj.score += 50; if (LK.match(/pag(e|ing|inat)/i)) linkObj.score += 25; if (LK.match(/(first|last)/i)) { if (!linkObj.linkText.match(this.KF.JM)) linkObj.score -= 65; } if (LK.match(this.KF.DW) || LK.match(this.KF.MM)) linkObj.score -= 50; if (LK.match(this.KF.KG)) linkObj.score -= 200; var parentNode = link.parentNode; var YDNodeMatch = false; var DWNodeMatch = false; while (parentNode) { var YB = parentNode.className + ' ' + parentNode.id; if (!YDNodeMatch && YB && YB.match(/pag(e|ing|inat)/i)) { YDNodeMatch = true; linkObj.score += 25; } if (!DWNodeMatch && YB && YB.match(this.KF.DW)) { if (!YB.match(this.KF.YD)) { linkObj.score -= 25; DWNodeMatch = true; } } parentNode = parentNode.parentNode; } if (linkHref.match(/p(a|g|ag)?(e|ing|ination)?(=|\/)[0-9]{1,2}/i) || linkHref.match(/(page|paging)/i)) linkObj.score += 25; if (linkHref.match(this.KF.MM)) linkObj.score -= 15; var linkTextAsNumber = parseInt(linkText, 10); if (linkTextAsNumber) { if (linkTextAsNumber === 1) { linkObj.score -= 10; } else { linkObj.score += Math.max(0, 10 - linkTextAsNumber); } } } var HP = null; for (var page in FH) { if (FH.hasOwnProperty(page)) { if (FH[page].score >= 50 && (!HP || HP.score < FH[page].score)) HP = FH[page]; } } var nextHref = null; if (HP) { nextHref = HP.href.replace(/\/$/, ''); this.log('NEXT PAGE IS ' + nextHref); this.JQ[nextHref] = true; } return nextHref; }, WH: function (request) { return (request.status >= 200 && request.status < 300) || request.status === 304 || (request.status === 0 && request.responseText); }, CH: function (url, options) { var request = new XMLHttpRequest(); function ZV(readyState) { if (request.readyState === 4) { if (this.WH(request)) { if (options.success) options.success(request); } else if (options.error) { options.error(request); } } } if (typeof options === 'undefined') options = {}; request.onreadystatechange = ZV; request.open('get', url, true); request.setRequestHeader('Accept', 'text/html'); try { request.send(options.postBody); } catch (e) { if (options.error) options.error(); } return request; }, EG: function (PO) { var doc = this._doc; this.EP += 1; var WW = doc.createElement("DIV"); WW.id = 'CB-page-' + this.EP; WW.className = 'page'; WW.innerHTML = '<p class="page-separator" title="Page ' + this.EP + '">&sect;</p>'; doc.getElementById("CB-content").appendChild(WW); if (this.EP > this.MD) { var HD = "<div style='text-align: center'><a href='" + PO + "'>View Next Page</a></div>"; WW.innerHTML = WW.innerHTML + HD; return; } (function (VR, MX) { this.CH(VR, { success: function (r) { var eTag = r.getResponseHeader('ETag'); if (eTag) { if (eTag in this.OD) { this.log("Exact duplicate page found via ETag. Aborting."); WW.style.display = 'none'; return; } this.OD[eTag] = 1; } var page = doc.createElement("DIV"); var XV = r.responseText.replace(/\n/g, '\uffff').replace(/<script.*?>.*?<\/script>/gi, ''); XV = XV.replace(/\n/g, '\uffff').replace(/<script.*?>.*?<\/script>/gi, ''); XV = XV.replace(/\uffff/g, '\n').replace(/<(\/?)noscript/gi, '<$1div'); XV = XV.replace(this.KF.LC, '<$1span>'); page.innerHTML = XV; this.LI(page); this.HU = 0x1 | 0x2 | 0x4; var MH = this.OR(page); var content = this.JY(page); if (!content) { this.log("No content found in page to append. Aborting."); return; } var firstP = content.getElementsByTagName("P").length ? content.getElementsByTagName("P")[0] : null; if (firstP && firstP.innerHTML.length > 100) { for (var i = 1; i <= this.EP; i += 1) { var rPage = doc.getElementById('CB-page-' + i); if (rPage && rPage.innerHTML.indexOf(firstP.innerHTML) !== -1) { this.log('Duplicate of page ' + i + ' - skipping.'); WW.style.display = 'none'; this.JQ[VR] = true; return; } } } this.US(content); MX.innerHTML = MX.innerHTML + content.innerHTML; setTimeout((function () { this.IH(MX); }).bind(this), 500); if (MH) this.EG(MH); } }); }).bind(this)(PO, WW); }, ON: function (e) { if (!this.ID(this.RS)) return 0; var weight = 0; if (typeof(e.className) === 'string' && e.className !== '') { if (this.KF.DW.test(e.className)) weight -= 25; if (this.KF.YD.test(e.className)) weight += 25; } if (typeof(e.id) === 'string' && e.id !== '') { if (this.KF.DW.test(e.id)) weight -= 25; if (this.KF.YD.test(e.id)) weight += 25; } return weight; }, GJ: function (e, tag) { var isEmbed = ["object", "embed", "iframe"].indexOf(tag) !== -1; this.QP(e.getElementsByTagName(tag), function (element) { if (isEmbed) { var attributeValues = [].map.call(element.attributes, function (attr) { return attr.value; }).join("|"); if (this.KF.QB.test(attributeValues)) return false; if (this.KF.QB.test(element.innerHTML)) return false; } return true; }); }, BB: function (node, tagName, maxDepth, filterFn) { maxDepth = maxDepth || 3; tagName = tagName.toUpperCase(); var depth = 0; while (node.parentNode) { if (maxDepth > 0 && depth > maxDepth) return false; if (node.parentNode.tagName === tagName && (!filterFn || filterFn(node.parentNode))) return true; node = node.parentNode; depth++; } return false; }, IM: function (table) { var rows = 0; var columns = 0; var trs = table.getElementsByTagName("tr"); for (var i = 0; i < trs.length; i++) { var rowspan = trs[i].getAttribute("rowspan") || 0; if (rowspan) { rowspan = parseInt(rowspan, 10); } rows += (rowspan || 1); var LW = 0; var cells = trs[i].getElementsByTagName("td"); for (var j = 0; j < cells.length; j++) { var colspan = cells[j].getAttribute("colspan") || 0; if (colspan) { colspan = parseInt(colspan, 10); } LW += (colspan || 1); } columns = Math.max(columns, LW); } return {rows: rows, columns: columns}; }, XQ: function (root) { var tables = root.getElementsByTagName("table"); for (var i = 0; i < tables.length; i++) { var table = tables[i]; var role = table.getAttribute("role"); if (role == "presentation") { table.RX = false; continue; } var datatable = table.getAttribute("datatable"); if (datatable == "0") { table.RX = false; continue; } var summary = table.getAttribute("summary"); if (summary) { table.RX = true; continue; } var caption = table.getElementsByTagName("caption")[0]; if (caption && caption.childNodes.length > 0) { table.RX = true; continue; } var dataTableDescendants = ["col", "colgroup", "tfoot", "thead", "th"]; var descendantExists = function (tag) { return !!table.getElementsByTagName(tag)[0]; }; if (dataTableDescendants.some(descendantExists)) { this.log("Data table because found data-y descendant"); table.RX = true; continue; } if (table.getElementsByTagName("table")[0]) { table.RX = false; continue; } var sizeInfo = this.IM(table); if (sizeInfo.rows >= 10 || sizeInfo.columns > 4) { table.RX = true; continue; } table.RX = sizeInfo.rows * sizeInfo.columns > 10; } }, HJ: function (e, tag) { if (!this.ID(this.CS)) return; var isList = tag === "ul" || tag === "ol"; this.QP(e.getElementsByTagName(tag), function (node) { var isDataTable = function (t) { return t.RX; }; if (this.BB(node, "table", -1, isDataTable)) { return false; } var weight = this.ON(node); var ST = 0; this.log("Cleaning Conditionally", node); if (weight + ST < 0) { return true; } if (this.YP(node, ',') < 10) { var p = node.getElementsByTagName("p").length; var img = node.getElementsByTagName("img").length; var li = node.getElementsByTagName("li").length - 100; var input = node.getElementsByTagName("input").length; var GK = 0; var embeds = node.getElementsByTagName("embed"); for (var ei = 0, il = embeds.length; ei < il; ei += 1) { if (!this.KF.QB.test(embeds[ei].src)) GK += 1; } var ZD = this.QZ(node); var VL = this.CD(node).length; var haveToRemove = (img > 1 && p / img < 0.5 && !this.BB(node, "figure")) || (!isList && li > p) || (input > Math.floor(p / 3)) || (!isList && VL < 25 && (img === 0 || img > 2) && !this.BB(node, "figure")) || (!isList && weight < 25 && ZD > 0.2) || (weight >= 25 && ZD > 0.5) || ((GK === 1 && VL < 75) || GK > 1); return haveToRemove; } return false; }); }, WV: function (e, regex) { var UO = this.PK(e, true); var next = this.PK(e); while (next && next != UO) { if (regex.test(next.className + " " + next.id)) { next = this.KQ(next); } else { next = this.PK(next); } } }, SQ: function (e) { for (var DD = 1; DD < 3; DD += 1) { this.QP(e.getElementsByTagName('h' + DD), function (header) { return this.ON(header) < 0; }); } }, ID: function (flag) { return (this.HU & flag) > 0; }, WJ: function (flag) { this.HU = this.HU | flag; }, BC: function (flag) { this.HU = this.HU & ~flag; }, YF: function (KI) { var nodes = this.VY(this._doc, ["p", "pre"]); var brNodes = this.VY(this._doc, ["div > br"]); if (brNodes.length) { var set = new Set(); [].forEach.call(brNodes, function (node) { set.add(node.parentNode); }); nodes = [].concat.apply(Array.from(set), nodes); } var score = 0; return this.ZR(nodes, function (node) { if (KI && !KI(node)) return false; var JI = node.className + " " + node.id; if (this.KF.XI.test(JI) && !this.KF.LB.test(JI)) { return false; } if (node.matches && node.matches("li p")) { return false; } var textContentLength = node.textContent.trim().length; if (textContentLength < 140) { return false; } score += Math.sqrt(textContentLength - 140); if (score > 20) { return true; } return false; }); }, parse: function () { if (this.RG > 0) { var numTags = this._doc.getElementsByTagName("*").length; if (numTags > this.RG) { throw new Error("Aborting parsing document; " + numTags + " elements found"); } } if (typeof this._doc.documentElement.firstElementChild === "undefined") { this.PK = this.AB; } this.US(this._doc); this.NU(); var WF = this.DO(); this.LX = WF.title; var HK = this.JY(); if (!HK) return null; this.log("Grabbed: " + HK.innerHTML); this.IH(HK); if (!WF.YE) { var paragraphs = HK.getElementsByTagName("p"); if (paragraphs.length > 0) { WF.YE = paragraphs[0].textContent.trim(); } } var textContent = HK.textContent; return { uri: this._uri, title: this.LX, GQ: WF.GQ || this.BY, dir: this.MV, content: HK.innerHTML, textContent: textContent, length: textContent.length, YE: WF.YE, MN: HK.children[0].children, selector:this._selector }; } }; if (typeof module === "object") { module.exports = YI; } function KW(root, QT, FI) { function RC(n) { return !isNaN(parseFloat(n)) && isFinite(n); } if (!RC(QT) || !RC(FI)) { console.error('KW.constructor: Provided percentages must be numeric only.' + ' QT: ' + QT + ' FI: ' + FI + ' given'); } if (!QT) { console.warn('KW.constructor: Percentage from was excepted but it was not given. Default value (30% will be used)'); } if (!FI) { console.warn('KW.constructor: Percentage to was excepted but it was not given. Default value (60% will be used)'); } if (QT < 0 || QT > 100) { console.error('KW.constructor: QT param must be between 0-100 and lower than FI. ' + QT + ' given'); } if (FI < 0 || FI > 100) { console.error('KW.constructor: QT param must be between 0-100 and lower than FI. ' + QT + ' given'); } if (QT > FI) { console.error('KW.constructor: QT > FI. This must be QT < FI'); } var self = this; var SJ = root; SJ.parentNode.removeChild(SJ); var EA = QT === null || QT === undefined ? 30 : QT; var KC = FI === null || FI === undefined ? 60 : FI; var SB = 0; var DQ = 0; var QG; var article; var JH; var MZ; var WK; var MG = 0; var inserted = false; var cursor = {}; Object.defineProperties(this, { RJ: {get: function () {return DQ - (DQ * 20 / 100);}}, }); Object.defineProperties(cursor, { DG: {get: function () {return MG === 0 || MG <= MZ;}}, TQ: {get: function () {return MG >= MZ && MG <= WK;}}, FK: {get: function () { return MG >= WK || MG <= SB;}} }); function EW(root) { JH = root; JH.classList.add('yui3-cssreset'); var HY = { 'animation': "none", 'animation-delay': "0", 'animation-direction': "normal", 'animation-duration': "0", 'animation-fill-mode': "none", 'animation-iteration-count': "1", 'animation-name': "none", 'animation-play-state': "running", 'animation-timing-function': "ease", 'backface-visibility': "visible", 'background': "0", 'background-attachment': "scroll", 'background-clip': "borderBox", 'background-color': "transparent", 'background-image': "none", 'background-origin': "paddingBox", 'background-position': "0 0", 'background-position-x': "0", 'background-position-y': "0", 'background-repeat': "repeat", 'background-size': "auto auto", 'border': "0", 'border-style': "none", 'border-width': "medium", 'border-color': "inherit", 'border-bottom': "0", 'border-bottom-color': "inherit", 'border-bottom-left-radius': "0", 'border-bottom-right-radius': "0", 'border-bottom-style': "none", 'border-bottom-width': "medium", 'border-collapse': "separate", 'border-image': "none", 'border-left': "0", 'border-left-color': "inherit", 'border-left-style': "none", 'border-left-width': "medium", 'border-radius': "0", 'border-right': "0", 'border-right-color': "inherit", 'border-right-style': "none", 'border-right-width': "medium", 'border-spacing': "0", 'border-top': "0", 'border-top-color': "inherit", 'border-top-left-radius': "0", 'border-top-right-radius': "0", 'border-top-style': "none", 'border-top-width': "medium", 'bottom': "auto", 'box-shadow': "none", 'box-sizing': "contentBox", 'caption-side': "top", 'clear': "none", 'clip': "auto", 'color': "inherit", 'columns': "auto", 'column-count': "auto", 'column-fill': "balance", 'column-gap': "normal", 'column-rule': "medium none currentColor", 'column-rule-color': "currentColor", 'column-rule-style': "none", 'column-rule-width': "none", 'column-span': "1", 'column-width': "auto", 'content': "normal", 'counter-increment': "none", 'counter-reset': "none", 'cursor': "auto", 'direction': "ltr", 'display': "inline", 'empty-cells': "show", 'float': "left", 'font': "normal", 'font-family': "inherit", 'font-size': "medium", 'font-style': "normal", 'font-variant': "normal", 'font-weight': "normal", 'height': "auto", 'hyphens': "none", 'left': "auto", 'letter-spacing': "normal", 'line-height': "normal", 'list-style': "none", 'list-style-image': "none", 'list-style-position': "outside", 'list-style-type': "disc", 'margin': "0", 'margin-bottom': "0", 'margin-left': "0", 'margin-right': "0", 'margin-top': "10px", 'max-height': "none", 'max-width': "none", 'min-height': "0", 'min-width': "0", 'opacity': "1", 'orphans': "0", 'outline': "0", 'outline-color': "invert", 'outline-style': "none", 'outline-width': "medium", 'overflow': "visible", 'overflow-x': "visible", 'overflow-y': "visible", 'padding': "0", 'padding-bottom': "0", 'padding-left': "0", 'padding-right': "0", 'padding-top': "0", 'page-break-after': "auto", 'page-break-before': "auto", 'page-break-inside': "auto", 'perspective': "none", 'perspective-origin': "50% 50%", 'position': "static", 'quotes': "'\201C' '\201D' '\2018' '\2019'", 'right': "auto", 'tabSize': "8", 'table-layout': "auto", 'text-align': "inherit", 'text-alignLast': "auto", 'text-decoration': "none", 'text-decoration-color': "inherit", 'text-decoration-line': "none", 'text-decoration-style': "solid", 'text-indent': "0", 'text-shadow': "none", 'text-transform': "none", 'top': "auto", 'transform': "none", 'transform-style': "flat", 'transition': "none", 'transition-delay': "0s", 'transition-duration': "0s", 'transition-property': "none", 'transition-timing-fFunction': "ease", 'unicode-bidi': "normal", 'vertical-align': "baseline", 'visibility': "visible", 'white-space': "normal", 'widows': "0", 'width': "100%", 'word-spacing': "normal", 'z-index': "auto" }; Object.keys(HY).forEach(function (key) { JH.style.setProperty(key, HY[key], "important"); }); } function OL(node) { if (node['id']) { var WQ = parent.document.getElementById(node['id']); return WQ ? WQ.parentNode : null; } else if (node.classList && node.classList.length) { var classes = []; [].forEach.call(node.classList, function (className) { classes.push(className); }); var HH = parent.document.getElementsByClassName(classes.join(' ')); return HH.length && typeof HH[0] != 'undefined' ? HH[0].parentNode : null; } else { return node.parentNode ? KE(node.parentNode) : null; } } function KE(node, _EX, _YR) { var EX = _EX || false; var YR = _YR || 0; if (node[0] && EX && YR === 1) { var fn = node[0]; if (fn['id']) { return parent.document.getElementById(fn['id']); } else if (fn.classList && fn.classList.length) { var classes = []; [].forEach.call(fn.classList, function (className) { classes.push(className); }); return parent.document.querySelector(fn.tagName + '.' + classes.join('.')).parentNode; } else { return null; } } var result = null; if (Array.isHTMLCollection(node) && node.length) { [].forEach.call(node, function (element) { result = OL(element, true); }) } else { result = OL(node); } return result; } function NN() { var loc = parent.document.location; QG = new YI({ spec: loc.href, host: loc.host, prePath: loc.protocol + "//" + loc.host, scheme: loc.protocol.substr(0, loc.protocol.indexOf(":")), pathBase: loc.protocol + "//" + loc.host + loc.pathname.substr(0, loc.pathname.lastIndexOf("/") + 1) }, parent.document.cloneNode(true)).parse(); article = KE(QG.MN, true, QG.MN.length); if (!article && QG.selector){ try { article = document.querySelector(QG.selector) }catch(e){ console.error(e); } } SI(); } function SI() { if (article && article.parentNode && article.parentNode.children[0] && article.parentNode.children[0].tagName === 'HEADER') { article = article.parentNode; return; } if (article && article.id === 'wrap' && article.children[0].id === 'content') { article = article.children[0]; return; } var logo = parent.document.querySelector('a.logo.custom-logo-18'); if (logo) { article = parent.document.getElementsByClassName('content_text')[0]; return; } logo = parent.document.querySelector('div#page-wrap > center>img'); if (logo) { article = parent.document.getElementsByClassName('detail-left-side')[0]; return; } if (article) { var OC = null; var found = false; [ 'div.td-pb-row > div.td-pb-span8.td-main-content > div.td-ss-main-content > article', 'div.entry-content' ].forEach(function (selector) { if (found) {return;} OC = article.querySelector(selector); if (OC) { article = OC; found = true; } }); if (found) {return;} } if (article && article.classList.contains('post-body') && article.classList.contains('entry-content')) { article = article.parentNode; return; } if (article === null && QG.MN && Array.isHTMLCollection(QG.MN)) { [].forEach.call(QG.MN, function (e) { if (e.tagName === 'ARTICLE') { article = parent.document.querySelector(e.tagName); } else { console.info('KW.NN: Cant parse article. ' + 'You should add this new condition to the code'); } }); } if (article) { return; } console.error('KW.NN: Article In DOM not recognized'); } function QM(width) { if (DQ === 0 && self.RJ) { return true; } return width <= DQ && self.RJ <= width; } function NO(element) { if (!element || !element.parentNode) { return element; } if (QM(NE(element.parentNode))) { var GV = RA(element.parentNode); if (GV) { return GV; } return element.parentNode; } return NO(element.parentNode); } function RA(element) { if (!element.children) { console.warn('KW.RA: ' + 'Children were waited but, ' + typeof element.children + 'given'); return null; } var result = null; if (element.children) { [].forEach.call(element.children, function (node) { (!result) && (result = QM(NE(node)) ? node : null); }); return result; } return QM(NE(element.children[0])) ? element.children[0] : null; } function YZ(element) { var nextNodeIndex = Array.prototype.indexOf.call(element.parentNode.children, element); var nextNode = element.parentNode.children[nextNodeIndex + 1]; return nextNode && !nextNode.clientHeight ? YZ(nextNode) : nextNode; } function LO(element, _before) { if (SB <= 300) { console.warn('KW.LO: Article is too small to render informer block'); inserted = true; return; } var before = _before || false; var nextNode = YZ(element); if (RN(element, ['FIGURE', 'IMG', 'TABLE', 'IFRAME', 'TIME', 'CODE'])) { element.parentNode.insertBefore(JH, element.nextSibling); JH = parent.document.getElementById(JH.id); JH.appendChild(SJ); inserted = true; return; } if (VM(nextNode, ['SC_TBlock', 'fb_iframe_widget', 'twitter-tweet-button', 'adsbygoogle'])) { LO(nextNode, false); return; } if (element.tagName !== 'IMG' && !QM(element.clientWidth) || element.className.indexOf('size-full') != -1 && !QM(element.clientWidth)) { var suitableNode = NO(element); if (suitableNode.parentNode) { suitableNode.parentNode.insertBefore(JH, suitableNode); } else { element.parentNode.insertBefore(JH, before ? element : element.nextSibling); } AY(SJ); return; } if (['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].indexOf(element.tagName) != -1 || FR(nextNode, ['UL', 'OL'])) { if (typeof nextNode.nextSibling != 'undefined') { element.parentNode.insertBefore(JH, nextNode.nextSibling); } else { console.error('KW.LO: Cant insert informer block after image - it does not exist'); } } else if (FR(nextNode, ['FIGURE', 'IMG', 'TABLE', 'IFRAME', 'TIME', 'CODE'])) { if (typeof nextNode.nextSibling != 'undefined') { element.parentNode.insertBefore(JH, nextNode.nextSibling); } else { console.error('KW.LO: Cant insert informer block after image - it does not exist'); } } else if (RN(element, ['INS'])) { element.parentNode.insertBefore(JH, nextNode); } else { element.parentNode.insertBefore(JH, before ? element : element.nextSibling); } AY(SJ); } function AY(SJ) { if (JH.id !== JH.id) { JH = parent.document.getElementById(JH.id); JH.appendChild(SJ); } inserted = true; } function FR(nextNode, specialTags) { return (typeof nextNode != 'undefined') && (specialTags.indexOf(nextNode.tagName) != -1) || RN(nextNode, specialTags); } function RN(node, tags) { if (!tags || !tags.length) { console.warn('KW.RN: tags MUST NOT be empty array'); return false; } if (typeof node == 'undefined') { return false; } if (!node.children || node.children.length === 0) { return false; } var result = false; [].forEach.call(node.children, function (_node) { if (_node.children && _node.children.length > 0) { [].forEach.call(_node.children, function (_node2) { if (!result) { result = RN(_node2, tags); } }); } if (!result) { (tags.indexOf(_node.tagName) != -1) && (result = true); } }); return result; } function VM(node, tags) { if (!tags || !tags.length) { console.warn('KW.VM: tags MUST NOT be empty array'); return false; } if (typeof node == 'undefined') { return false; } if (!node.children || node.children.length === 0) { return false; } var result = false; [].forEach.call(node.children, function (_node) { if (_node.children && _node.children.length > 0) { [].forEach.call(_node.children, function (_node2) { if (!result) { result = RN(_node2, tags); } }); } if (!result) { tags.forEach(function (e) { if (!result) { result = _node.classList.contains(e); } }); } }); return result; } function AW(node, tags) { if (!tags) { console.warn('KW.AW: - tag MUST NOT be empty array'); return false; } if (typeof node == 'undefined') { console.warn('KW.AW: - Node MUST NOT be empty '); return false; } if (!node.children || node.children.length === 0) { return false; } var result = null; [].forEach.call(node.children, function (_node) { if (_node.children && _node.children.length > 0) { [].forEach.call(_node.children, function (_node2) { if (!result) { result = AW(_node2, tags); } }); } if (!result) { (tags.indexOf(_node.tagName) != -1) && (result = _node); } }); return result; } function QE(DY) { if (!DY) { return; } var RU = 0; if (YL(DY)) { RU = BX(DY); } else { RU = DY.clientHeight; } if (RU) { return RU + JD(DY, 'bottom') + JD(DY, 'top') } if (DY.children && DY.children.length === 0 && RU === 0) { return RU; } [].forEach.call(DY.children, function (node) { RU = node.children ? QE(node) : node.clientHeight + JD(node, 'bottom') + JD(node, 'top'); }); return RU; } function NE(DY) { if (!DY) { return; } if (PZ(DY)) { return; } var DYClientWidth = DY.clientWidth; if (DYClientWidth) { return DYClientWidth; } if (DY.children && DY.children.length === 0 && DYClientWidth === 0) { return DYClientWidth; } if (!DY.children) { return DYClientWidth; } [].forEach.call(DY.children, function (node) { DYClientWidth = node.children ? NE(node) : node.clientWidth + NE(node, 'left') + JD(node, 'right'); }); return DYClientWidth; } function BS(_el) { if (_el.parentNode.children.length > 1) { DL(_el.nextSibling); } else { BS(_el.parentNode.nextSibling); } } function DM(string) { return string.charAt(0).toUpperCase() + string.slice(1); } function BX(textNode) { var height = 0; if (parent.document.createRange) { var range = parent.document.createRange(); range.selectNodeContents(textNode); if (range.getBoundingClientRect) { var rect = range.getBoundingClientRect(); if (rect) { height = rect.bottom - rect.top; } } } return height; } function JD(DY, direction) { try { var style = DY.currentStyle || window.parent.getComputedStyle(DY); var margin = style['margin' + DM(direction.toLowerCase())].replace('px', ''); return RC(margin) ? parseInt(margin) : 0; } catch (e) { if (DY.nodeName === '#text') { return BX(DY); } return 0; } } function UJ(DY) { var parent = DY.parentNode; var style = DY.currentStyle || window.parent.getComputedStyle(parent); var fontSize = style.fontSize.replace('px', ''); var lineHeight = style.lineHeight.replace('px', ''); fontSize = RC(fontSize) ? parseInt(fontSize) : 0; lineHeight = RC(lineHeight) ? parseInt(lineHeight) : 0; return fontSize + lineHeight; } function DL(DY) { if (inserted) {return} if (!DY) {return;} if (PZ(DY)) {return;} if (DY.clientHeight === undefined) {return;} var PL = 0; if (YL(DY)) { PL = BX(DY); } else { PL = QE(DY); } if (PL === 0) {return;} MG += PL; if (cursor.DG) {return;} if (cursor.TQ) { if (RN(DY, ['P', 'BLOCKQUOTE', 'PRE'])) { MG -= PL; [].forEach.call(DY.children, function (_e) { DL(_e); }); return; } if (['TR', 'TD', 'THEAD', 'TBODY', 'TFOOTER', 'TABLE'].indexOf(DY.tagName) != -1) { function FM(DY) { if (DY.tagName === 'TABLE') { return DY; } return (DY.parentNode && DY.parentNode.tagName !== 'TABLE') ? FM(DY.parentNode) : DY.parentNode; } LO(FM(DY)); return; } if (['LI', 'INS', 'IMG', 'TABLE'].indexOf(DY.tagName) != -1) { if (DY.tagName === 'LI' && EA <= 10) { LO(DY, true); return; } LO(DY.parentNode); return; } LO(DY); return; } if (cursor.FK) { MG -= PL; if (MG + PL < SB && ['IFRAME', 'IMG', 'FIGURE', 'TIME', 'CODE'].indexOf(DY.tagName) != -1) { LO(DY); return; } if (( PL >= SB || (MG + PL) >= SB) && DY.children && DY.children.length) { WA(DY); return; } if (['P', 'BLOCKQUOTE', 'PRE', 'SPAN'].indexOf(DY.tagName) != -1) { if (['BLOCKQUOTE', 'PRE'].indexOf(DY.tagName) != -1) { if (!DY.children) { LO(DY); return; } [].forEach.call(DY.children, function (_e) { DL(_e); }); return; } if (RN(DY, ['IMG', 'FIGURE', 'IFRAME'])) { LO(AW(DY, ['IMG', 'FIGURE', 'IFRAME'])); return; } if (EA >= 70 && MG + PL <= SB) { LO(DY); return; } LO(DY, true); return; } WA(DY) } } function WA(DY) { if (!DY){ return; } if (DY.children && DY.children.length) { [].forEach.call(DY.children, function (_e) { DL(_e); }); } else { BS(DY); } } function NR() { if (!article) { console.error('KW.NR: Article was not found'); return } if (!article.children && !article.length) { console.error('KW.NR: Article cant be without any children'); } (SB === 0) && QI(); if (article.length) { [].forEach.call(article, function (article) { [].forEach.call(article.children, function (_e) { DL(_e) }); }); } else { var lastItem; [].forEach.call(article.children, function (_e) { lastItem = _e; DL(_e) }); if (!inserted) { LO(lastItem); } } } var cssClasses = ['native_ad', 'adds', 'td-post-next-prev', 'adsb30', 'sadserver', 'adsbygoogle', 'fb-share-button', 'fb_iframe_widget', 'fb-comments', 'td_block_related_posts', 'td-post-sharing', 'td-post-sharing-top', 'sharing', 'shareaholic-ui', 'comments', 'related', 'share', 'at-share-btn-elements', 'post-footer']; var ids = ['ad-space', 'fb_comments_div', 'ad-space', 'div-gpt-ad', 'MarketGidScript', 'MarketGidScriptRoot', 'disqus_comments_div', 'ScriptRoot', 'Preload', 'MarketGidComposite', 'SC_TBlock', root.id]; function PZ(DY) { var BK = false; ids.forEach(function (id) { if (!BK && DY.id) { BK = DY.id.includes(id) } }); if (BK) { return true; } cssClasses.forEach(function (cssClass) { if (!BK && DY.className) { BK = DY.className.indexOf(cssClass) != -1; } }); if (DY.children && DY.children[2] && DY.children[2].tagName === 'INS' && DY.children[2].classList && DY.children[2].classList.contains('adsbygoogle')) { BK = true; } return BK; } function _isIE() { return navigator.appName == 'Microsoft Internet Explorer' || !!(navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv:11/)); } function GR(DY) { if (!DY.children || DY.children === 0) { return true; } var result = true; [].forEach.call(DY.children, function (node) { if (!result) { return; } if (node.clientHeight !== 0) { result = false; return; } if (!result && node.children && node.children.length) { result = GR(node); } }); return result; } function YL(e) { return e.nodeType === Node.TEXT_NODE; } function GC(DY) { if (!DY) { return; } if (DY.tagName === 'FOOTER') { return; } if (PZ(DY)) { return; } if (_isIE() && Object.prototype.toString.call(DY) === '[object Text]') { if (DY.nodeValue.trim() === '') { return 0; } } var height = 0; if (YL(DY)) { height += BX(DY); } else if (DY.tagName === 'BR' && DY.nextSibling && DY.nextSibling.tagName === 'BR') { height += UJ(DY); } else { height += DY.clientHeight + JD(DY, 'bottom') + JD(DY, 'top'); } if (!height) { return; } var hasNoChildrenNodes = DY.childNodes && DY.childNodes.length === 0; if ((hasNoChildrenNodes || GR(DY)) && height !== 0) { SB += height; return; } [].forEach.call(DY.childNodes, function (node) { GC(node); }); } function IQ(DY) { if (!DY.children || DY.children === 0) { return DY.clientWidth === 0; } var result = false; [].forEach.call(DY.children, function (node) { if (result) { return; } if (node.clientWidth === 0) { result = true; } else if (node.children && node.children.length) { result = IQ(node); } }); return result; } function PX(DY) { if (!DY) { return; } var height = DY.clientWidth + JD(DY, 'left') + JD(DY, 'right'); if (!height) { return; } if (((DY.children && DY.children.length === 0) || IQ(DY)) && height !== 0 && (['P', 'PRE', 'BLOCKQUOTE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',].indexOf(DY.tagName) != -1 )) { if (DQ <= height) { DQ = height; } return; } if (!DY.children) { return; } [].forEach.call(DY.children, function (node) { PX(node); }); } function QI() { if (!article) { return; } GC(article); PX(article); MZ = SB * EA / 100; WK = SB * KC / 100; } EW(root); NN(); QI(); return { create: NR } }}; this['LentaInformCInArticleWidgetBlock662399'].call(this['LentaInformInfC662399'], this['LentaInformInfC662399']); this['LentaInformInfC662399']['funcBlocks']['InArticleWidget'] = 'LentaInformCInArticleWidgetBlock662399'; LentaInformInfC662399.init(); if (typeof LentaInformInfC662399.VZ.LentaInformC662399DisableStart == 'undefined') { LentaInformInfC662399.start(); } }